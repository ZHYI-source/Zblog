"use strict";(self.webpackChunkmaple_react=self.webpackChunkmaple_react||[]).push([[416,499],{60252:function(n,e,t){t.r(e),t.d(e,{default:function(){return I}});var s=t(37762),r=t(29439),o=t(72791),i=(t(60499),t(16871)),a=t(1413),c=t(45987),u=t(61742),m=t(14640),l=t(13295),d=t(64209),p=t(71363),h=(t(18056),t(87044),t(80184)),g=["node","inline","className","children"],w=function(n){var e=(0,o.useState)(""),t=(0,r.Z)(e,2),s=(t[0],t[1],(0,o.useState)(!1)),i=(0,r.Z)(s,2);i[0],i[1];return(0,h.jsx)("section",{className:"view-md-box",children:(0,h.jsx)(u.D,{className:"rendMd",remarkPlugins:[m.Z,{singleTilde:!1}],rehypePlugins:[l.Z],children:n.content,components:{code:function(n){n.node;var e=n.inline,t=n.className,s=n.children,r=(0,c.Z)(n,g),o=/language-(\w+)/.exec(t||"");return!e&&o?(0,h.jsx)(d.Z,(0,a.Z)({children:String(s).replace(/\n$/,""),style:p.Z,language:o[1]},r)):(0,h.jsx)("code",(0,a.Z)((0,a.Z)({className:t},r),{},{children:s}))}}})})},f=t(77732),b=t(53708),y=t(66920),v=function(){return(0,h.jsx)("div",{className:"comment-reply",children:(0,h.jsx)(f.Z,{actions:[(0,h.jsx)("button",{className:"site-btn",type:"submit",children:"\u8bc4\u8bba"})],author:(0,h.jsx)("span",{className:"name",children:"ZHOU YI"}),avatar:(0,h.jsx)(b.C,{src:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",alt:"Han Solo"}),content:(0,h.jsx)(y.Z,{rows:4})})})},x=function(n){var e=n.children;return(0,h.jsx)("section",{className:"comment-item",children:(0,h.jsx)(f.Z,{author:(0,h.jsx)("span",{className:"name",children:"Han Solo"}),avatar:(0,h.jsx)(b.C,{src:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",alt:"Han Solo"}),content:(0,h.jsx)("p",{children:"We supply a series of design principles, practical patterns and high quality design resources (Sketch and Axure)."}),children:e})})},k=t(91333),j=function(n){return(0,h.jsxs)("section",{className:"comment-box",children:[(0,h.jsx)(v,{}),(0,h.jsx)(k.Z,{}),(0,h.jsx)(x,{children:(0,h.jsx)(x,{})}),(0,h.jsx)(x,{})]})},S=t(26418),I=function(){var n=(0,o.useState)({}),e=(0,r.Z)(n,2),t=e[0],a=e[1],c=(0,o.useState)([{_id:"64f6ea62a0d58a3cda8cf5b8",title:"\u3010\u5173\u4e8e\u6211\u3011\u81ea\u8ff0",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",content:' <p align="center">\n   <img align="center" src="https://github.com/ZHYI-source/ZHYI-source/assets/59498872/5f4a3557-4663-4778-b9df-1789b44693ec" alt="Logo" width="150" height="150">\n   </p>\n<h3 align="center">" Hi ! \ud83d\udc4b "</h3>\n\n  <p align="center">\n    \u70ed\u7231\u7f16\u7a0b\u4ee3\u7801\uff0c\u575a\u4fe1\u6bcf\u4e00\u6b65\u90fd\u662f\u5947\u8ff9\uff0c\u6bcf\u4e00\u5929\u90fd\u662f\u65b0\u7684\u8d77\u70b9\u3002\n   </p>\n     <p align="center">\n      <img align="center" src="https://img.shields.io/badge/\u5e38\u7528\u6280\u672f-red">\n      <img align="center" src="https://img.shields.io/badge/-Vue-34495e?logo=vue.js">\n      <img align="center" src="https://img.shields.io/badge/-React-34495e?logo=react.js">\n      <img align="center" src="https://img.shields.io/badge/-HTML5-red?logo=html5&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-CSS3-blue?logo=css3&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-JavaScript-yellow?logo=javascript&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-Nodejs-red?logo=node.js&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-Express-green?logo=Express&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-MongoDB-yellow?logo=MongoDB&logoColor=white">\n      <img align="center" src="https://img.shields.io/badge/-Mysql-blue?logo=Mysql&logoColor=white">\n</p>\n\n\u5173\u4e8e\u4f5c\u8005\uff1a\n- [\u4e3b\u9875@ZHOUYI](http://www.zhouyi.run)\n- [\u535a\u5ba2@ZHOUYI](http://www.zhouyi.run/#/blog)\n- [Gitee@ZHOUYI](https://gitee.com/Z568_568)\n  \n\u8054\u7cfb\u6211\uff1a\n- [\u7559\u8a00@ZHOUYI](http://www.zhouyi.run/#/contact)\n- \u90ae\u7bb1\uff1ayizhou568@gmail.com\n\n',userId:"64aabf3d28f413f08d51cc00",category:"\u7b80\u4ecb",viewNum:3,likeNum:0,isReship:!1,recommended:!1,likeToken:[],status:!0,createdAt:"2023-09-05T08:44:18.172Z",updatedAt:"2023-09-06T00:41:33.634Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64dc5132a0d58a3cda8cc3c0",title:"\u3010\u9879\u76ee\u603b\u7ed3\u3011\u5173\u4e8e\u8bbf\u5ba2\u8bb0\u5f55\u529f\u80fd\u6a21\u5757\u6280\u672f\u70b9",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",abstract:"\u4e0d\u7ba1\u5728\u5f00\u53d1\u4e2a\u4eba\u7f51\u7ad9\u8fd8\u662f\u516c\u53f8\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u6709\u53ef\u80fd\u4f1a\u9700\u8981\u589e\u52a0\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\uff0c\u6dfb\u52a0\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\u662f\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u529f\u80fd\uff0c\u901a\u8fc7\u8fd9\u4e2a\u529f\u80fd\uff0c\u53ef\u4ee5\u8ddf\u8e2a\u548c\u8bb0\u5f55\u8bbf\u95ee\u8005\u7684\u6d3b\u52a8\uff0c\u4ece\u800c\u83b7\u5f97\u6709\u5173\u8bbf\u95ee\u8005\u884c\u4e3a\u7684\u6709\u4ef7\u503c\u7684\u4fe1\u606f\u3002\u8bbf\u5ba2\u8bb0\u5f55\u4e0d\u4ec5\u53ef\u4ee5",content:"### 1. \u524d\u8a00\n\u4e0d\u7ba1\u5728\u5f00\u53d1\u4e2a\u4eba\u7f51\u7ad9\u8fd8\u662f\u516c\u53f8\u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u6709\u53ef\u80fd\u4f1a\u9700\u8981\u589e\u52a0\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\uff0c\u6dfb\u52a0\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\u662f\u4e00\u4e2a\u5f88\u6709\u7528\u7684\u529f\u80fd\uff0c\u901a\u8fc7\u8fd9\u4e2a\u529f\u80fd\uff0c\u53ef\u4ee5\u8ddf\u8e2a\u548c\u8bb0\u5f55\u8bbf\u95ee\u8005\u7684\u6d3b\u52a8\uff0c\u4ece\u800c\u83b7\u5f97\u6709\u5173\u8bbf\u95ee\u8005\u884c\u4e3a\u7684\u6709\u4ef7\u503c\u7684\u4fe1\u606f\u3002\u8bbf\u5ba2\u8bb0\u5f55\u4e0d\u4ec5\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u4e86\u89e3\u8bbf\u95ee\u8005\u7684\u504f\u597d\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e8e\u5206\u6790\u7f51\u7ad9\u6216\u5e94\u7528\u7684\u6d41\u91cf\uff0c\u6539\u8fdb\u7528\u6237\u4f53\u9a8c\uff0c\u4ee5\u53ca\u4e3a\u5e02\u573a\u8425\u9500\u548c\u5206\u6790\u63d0\u4f9b\u6709\u529b\u7684\u6570\u636e\u652f\u6301\u3002\n\n\u5f53\u7136\uff0c\u6709\u5f88\u591a\u5df2\u7ecf\u505a\u597d\u7684\u8bbf\u5ba2\u5206\u6790\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\uff0c\u767e\u5ea6\u5206\u6790\u3001\u8c37\u6b4c\u5206\u6790\u7b49\u7b49\n\n\u4f46\u662f\uff0c\u6211\u8981\u81ea\u5df1\u52a8\u624b\u505a\u4e00\u4e2a \u5c31\u60f3\u6298\u817e\u6298\u817e\n\n### 2. \u6211\u7684\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\n\n\u6ca1\u6709\u505a\u590d\u6742\u7684\u529f\u80fd  \u53ea\u662f\u8bb0\u5f55\u8bbf\u5ba2\u7684\u6765\u6e90\u4fe1\u606f\u57fa\u4e8e\u7528\u6237\u8bbe\u5907\u548cIP\u7b49\u4fe1\u606f \u8db3\u4ee5\u591f\u7528\u4e86\n\n<a href=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1692157721166.png\" target=\"_blank\">\n<img src=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1692157721166.png\" alt=\"1692157721166.png\" width=\"100%\">\n</a>\n\n### 3. \u529f\u80fd\u5173\u952e\u70b9\n - \u83b7\u53d6\u7528\u6237\u771f\u5b9eIP\uff1a\u901a\u8fc7\u89e3\u6790HTTP\u8bf7\u6c42\u5934\u6216\u4ee3\u7406\u670d\u52a1\u5668\u914d\u7f6e\uff0c\u83b7\u53d6\u7528\u6237\u7684\u771f\u5b9eIP\u5730\u5740\u4ee5\u6807\u8bc6\u4e0d\u540c\u7684\u8bbf\u5ba2\u3002\n- \u83b7\u53d6\u7528\u6237\u8bbe\u5907\u4fe1\u606f\uff1a\u4f7f\u7528\u5de5\u5177\u5982ua-parser-js\u89e3\u6790\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\uff0c\u63d0\u53d6\u8bbe\u5907\u3001\u6d4f\u89c8\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u7b49\u4fe1\u606f\u3002\n- \u89e3\u6790\u7528\u6237IP\u5730\u5740\uff1a\u4f7f\u7528\u7b2c\u4e09\u65b9IP\u5730\u7406\u4f4d\u7f6e\u89e3\u6790\u670d\u52a1\uff0c\u5c06IP\u5730\u5740\u8f6c\u6362\u4e3a\u5927\u81f4\u7684\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002\n\n**\u8bbf\u5ba2\u8bb0\u5f55\u4e3b\u8981\u903b\u8f91\u5728\u540e\u7aef\u5b9e\u73b0**\n\n#### \u83b7\u53d6\u7528\u6237\u771f\u5b9eIP\n\n\u8fd9\u91cc\u4e0a\u7ebf\u540e\u8fd8\u9700\u8981\u5728\u670d\u52a1\u5668\u7684nginx\u914d\u7f6e \u624d\u4f1a\u751f\u6548\n\n\u83b7\u53d6\u7528\u6237\u7684\u771f\u5b9eIP\u5730\u5740\u662f\u8bbf\u5ba2\u8bb0\u5f55\u6a21\u5757\u7684\u5173\u952e\u90e8\u5206\uff0c\u7528\u4e8e\u6807\u8bc6\u4e0d\u540c\u8bbf\u5ba2\u5e76\u4e86\u89e3\u5176\u6765\u6e90\u3002\u7136\u800c\uff0c\u7531\u4e8e\u4ee3\u7406\u3001VPN\u7b49\u7f51\u7edc\u7ed3\u6784\uff0c\u76f4\u63a5\u83b7\u53d6\u771f\u5b9eIP\u53ef\u80fd\u4f1a\u53d7\u5230\u4e00\u4e9b\u9650\u5236\u3002\u4ee5\u4e0b\u662f\u83b7\u53d6\u7528\u6237\u771f\u5b9eIP\u7684\u4e00\u4e9b\u65b9\u6cd5\uff1a\n1. HTTP\u8bf7\u6c42\u5934\u4e2d\u7684X-Forwarded-For\uff08XFF\uff09\uff1a\u5728HTTP\u8bf7\u6c42\u5934\u4e2d\uff0cX-Forwarded-For\u5b57\u6bb5\u53ef\u80fd\u5305\u542b\u7528\u6237\u7684\u771f\u5b9eIP\u5730\u5740\uff0c\u5c24\u5176\u662f\u5f53\u8bf7\u6c42\u7ecf\u8fc7\u4ee3\u7406\u670d\u52a1\u5668\u65f6\u3002\u60a8\u7684\u670d\u52a1\u5668\u53ef\u4ee5\u68c0\u67e5\u8be5\u5b57\u6bb5\u5e76\u63d0\u53d6\u7528\u6237\u771f\u5b9eIP\u3002\n2. Remote Address\uff1a\u670d\u52a1\u5668\u4f1a\u8bb0\u5f55\u4e0e\u5ba2\u6237\u7aef\u5efa\u7acb\u8fde\u63a5\u7684\u8fdc\u7a0bIP\u5730\u5740\u3002\u7136\u800c\uff0c\u8fd9\u53ef\u80fd\u662f\u7528\u6237\u8fde\u63a5\u7684\u4ee3\u7406\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff0c\u800c\u4e0d\u662f\u7528\u6237\u7684\u771f\u5b9eIP\u3002\n3. WebSockets\u548cSocket\u8fde\u63a5\uff1a\u5982\u679c\u60a8\u7684\u5e94\u7528\u4f7f\u7528\u4e86WebSocket\u6216Socket\u8fde\u63a5\uff0c\u60a8\u53ef\u4ee5\u4ece\u8fde\u63a5\u4e2d\u83b7\u53d6\u7528\u6237\u7684\u771f\u5b9eIP\u3002\n4. \u53cd\u5411\u4ee3\u7406\u914d\u7f6e\uff1a\u5982\u679c\u60a8\u7684\u5e94\u7528\u5728\u53cd\u5411\u4ee3\u7406\uff08\u5982Nginx\u6216Apache\uff09\u540e\u9762\u8fd0\u884c\uff0c\u60a8\u53ef\u4ee5\u914d\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u5c06\u7528\u6237\u7684\u771f\u5b9eIP\u4f20\u9012\u7ed9\u5e94\u7528\u670d\u52a1\u5668\u3002\n\n``` js\n// \u83b7\u53d6\u7528\u6237\u7684\u771f\u5b9e\u516c\u7f51IP\nexports.getPublicIP = function (req) {\n    const headers = req.headers;\n    if (headers['x-real-ip']) {\n        return headers['x-real-ip'];\n    }\n    if (headers['x-forwarded-for']) {\n        const ipList = headers['x-forwarded-for'].split(',');\n        return ipList[0];\n    }\n    return '0.0.0.0';\n}\n```\n#### \u89e3\u6790\u7528\u6237IP\u5730\u5740\n\n\u6839\u636e\u7528\u6237IP\u89e3\u6790\u5730\u5740 \u4f7f\u7528\u7684\u662f\u7b2c\u4e09\u65b9\u514d\u8d39\u63a5\u53e3\n\n``` js\n// IP\u5730\u5740\u89e3\u6790\nexports.parseIP = function (clientIp) {\n    return new Promise((resolve, reject) => {\n        request(\n            `https://opendata.baidu.com/api.php?query=[${clientIp}]&co=&resource_id=6006&oe=utf8`,\n            {method: 'GET'},\n            function (error, response, body) {\n                if (error !== null) {\n                    reject(error);\n                    return;\n                }\n                if (body && !body.status) {\n                    resolve(body.length && JSON.parse(body).data[0].location || '-');\n                }\n            }\n        );\n    });\n}\n``` \n#### \u83b7\u53d6\u7528\u6237\u8bbe\u5907\u4fe1\u606f\n\u4f7f\u7528 `ua-parser-js` \u5206\u6790\u51fa\u7528\u6237\u7684\u8bbe\u5907\u4fe1\u606f\n > `ua-parser-js`\u662f\u4e00\u4e2aJavaScript\u5e93\uff0c\u5b83\u7528\u4e8e\u89e3\u6790\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\uff08User Agent String\uff09\uff0c\u4ee5\u4fbf\u4ece\u4e2d\u63d0\u53d6\u6709\u5173\u7528\u6237\u8bbe\u5907\u548c\u6d4f\u89c8\u5668\u7684\u4fe1\u606f\u3002\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\u662f\u7531\u6d4f\u89c8\u5668\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u4e00\u6bb5\u6587\u672c\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u5173\u4e8e\u6d4f\u89c8\u5668\u3001\u64cd\u4f5c\u7cfb\u7edf\u3001\u8bbe\u5907\u7c7b\u578b\u7b49\u4fe1\u606f\u3002ua-parser-js\u5e93\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u4ece\u7528\u6237\u4ee3\u7406\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u6709\u5173\u7528\u6237\u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u4ece\u800c\u53ef\u4ee5\u66f4\u597d\u5730\u8fdb\u884c\u8bbe\u5907\u9002\u914d\u548c\u7528\u6237\u4f53\u9a8c\u4f18\u5316\u3002\n\n``` js\n//\u8bc6\u522b\u5e38\u89c1\u7684\u6d4f\u89c8\u5668\u3001\u64cd\u4f5c\u7cfb\u7edf\u548c\u8bbe\u5907\u7b49\u4fe1\u606f\nconst u = new UAParser(req.headers['user-agent']);\n// u \u89e3\u6790\u7ed3\u679c\n{\n  browser: {\n    name: \"Chrome\",\n    version: \"80.0.3987.163\",\n    major: \"80\"\n  },\n  device: {\n    model: undefined,\n    type: undefined,\n    vendor: undefined\n  },\n  engine: {\n    name: \"Blink\"\n  },\n  os: {\n    name: \"Windows\",\n    version: \"10.0\"\n  }\n}\n\n```\n### 4. \u6570\u636e\u5e93\u8868\u8bbe\u8ba1\n``` js\nconst mongoose = require('mongoose')\nlet schema = new mongoose.Schema({\n    name: {\n        type: String,\n        comment: '\u7528\u6237\u540d\u79f0'\n    },\n    type: {\n        type: String,\n        enum: ['client', 'admin'],\n        default: 'client',\n        comment: '\u7ad9\u70b9\u7c7b\u578b'\n    },\n    page: {\n        type: String,\n        comment: '\u8bbf\u95ee\u9875\u9762'\n    },\n    ip: {\n        type: String,\n        comment: '\u8bbf\u95eeIP'\n    },\n    address: {\n        type: String,\n        comment: '\u8bbf\u95ee\u6765\u6e90'\n    },\n    browser: {\n        type: String,\n        comment: '\u8bbe\u5907'\n    },\n    viewNum: {\n        type: Number,\n        comment: '\u8bbf\u95ee\u6b21\u6570'\n    },\n    remark: {\n        type: String,\n        comment: '\u5907\u6ce8'\n    },\n\n}, {\n    timestamps: true,\n    versionKey: false, // \u8bbe\u7f6e\u4e0d\u9700\u8981version  _V:0\n});\n\nmodule.exports = mongoose.model('visitors', schema);\n\n```\n\n### 4.\u521b\u5efa\u8bbf\u5ba2\u8bb0\u5f55\u5b8c\u6574\u903b\u8f91\n\n\u8981\u70b9\uff1a\u5728\u4eca\u5929\u4e4b\u5185\u7684\u7528\u6237\u8bb0\u5f55 \u5bf9 \u7528\u6237\u540d\u79f0\u3001\u8bbf\u95ee\u7c7b\u578b\u3001IP\u3001\u8bbe\u5907\u3001\u5730\u5740\u3001\u9875\u9762\u4e0d\u540c\u7684\u6570\u636e\u8fdb\u884c\u5355\u72ec\u5f55\u5165\u65b0\u8bb0\u5f55\uff0c\u5426\u5219\u53ea\u66f4\u65b0\u8bbf\u95ee\u6b21\u6570\n\n\n``` js\n/**\n * \u521b\u5efa\u8bbf\u5ba2\u8bb0\u5f55\n * @returns {object} 200 - \u6210\u529f\u54cd\u5e94\n * @returns {object} 400 - \u53c2\u6570\u9a8c\u8bc1\u9519\u8bef\n * @returns {Error} default - \u672a\u77e5\u9519\u8bef\n */\nexports.visitorsCreate = [\n    async (req, res, next) => {\n        try {\n            const clientIP = getPublicIP(req);\n            //\u8bc6\u522b\u5e38\u89c1\u7684\u6d4f\u89c8\u5668\u3001\u64cd\u4f5c\u7cfb\u7edf\u548c\u8bbe\u5907\u7b49\u4fe1\u606f\n            const u = new UAParser(req.headers['user-agent']);\n            const address = await parseIP(clientIP);\n            const equipment = u.getBrowser().name ? `${u.getBrowser().name}.v${u.getBrowser().major}` : '\u672a\u77e5'\n            const today = new Date().toISOString().split('T')[0]; // \u83b7\u53d6\u4eca\u5929\u7684\u65e5\u671f\n\n            const existingVisitor = await VisitorsModel.findOne({\n                name: req.body.name || '-',\n                ip: clientIP,\n                type: req.body.type || 'client',\n                browser: equipment,\n                address,\n                page: req.body.page || '-',\n                createdAt: {$gte: new Date(today)}, // \u5728\u4eca\u5929\u4e4b\u5185\u7684\u8bb0\u5f55\n            });\n\n            if (existingVisitor) {\n                // \u5982\u679c\u4eca\u5929\u5df2\u7ecf\u8bb0\u5f55\u8fc7\u8fd9\u4e2a\u8bbf\u5ba2\u4fe1\u606f\uff0c\u5219\u53ea\u66f4\u65b0\u6d4f\u89c8\u6b21\u6570\n                await VisitorsModel.findByIdAndUpdate(existingVisitor._id, {$inc: {viewNum: 1}});\n                return apiResponse.successResponse(res, \"ok.\",);\n            } else {\n                // \u5426\u5219\uff0c\u521b\u5efa\u65b0\u7684\u8bbf\u5ba2\u8bb0\u5f55\n                const newVisitors = {\n                    page: req.body.page || '-',\n                    type: req.body.type || 'client',\n                    name: req.body.name || '-',\n                    address,\n                    ip: clientIP,\n                    browser: equipment,\n                    viewNum: 1, // \u521d\u59cb\u5316\u6d4f\u89c8\u6b21\u6570\u4e3a1\n                };\n                const createdVisitor = await VisitorsModel.create(newVisitors);\n                return apiResponse.successResponse(res, \"ok.\");\n            }\n        } catch (err) {\n            next(err);\n        }\n    }\n];\n```\n### 5. \u603b\u7ed3\u53ca\u6269\u5c55\u70b9\n\n1. \u5728\u540e\u7aef\uff0c\u9700\u8981\u521b\u5efaAPI\u63a5\u53e3\uff0c\u4ee5\u4fbf\u524d\u7aef\u6216\u5176\u4ed6\u7cfb\u7edf\u53ef\u4ee5\u5c06\u8bbf\u5ba2\u6570\u636e\u53d1\u9001\u5230\u6570\u636e\u5e93\u3002\u8fd9\u6d89\u53ca\u5230\u4ee5\u4e0b\u6b65\u9aa4\uff1a\n- \u63a5\u6536\u6570\u636e\uff1a\u7f16\u5199\u4ee3\u7801\u6765\u63a5\u6536\u6765\u81ea\u524d\u7aef\u7684\u6570\u636e\uff0c\u5305\u62ec\u8bbf\u95ee\u65f6\u95f4\u3001IP\u5730\u5740\u3001\u7528\u6237\u4ee3\u7406\u7b49\u4fe1\u606f\u3002\n- \u9a8c\u8bc1\u548c\u5904\u7406\uff1a\u5bf9\u63a5\u6536\u5230\u7684\u6570\u636e\u8fdb\u884c\u9a8c\u8bc1\uff0c\u786e\u4fdd\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u6709\u6548\u6027\u3002\u7136\u540e\uff0c\u5c06\u6570\u636e\u63d2\u5165\u8bbf\u5ba2\u8bb0\u5f55\u8868\u4e2d\u3002\n- IP\u5730\u5740\u89e3\u6790\uff1a\u4f7f\u7528IP\u5730\u5740\u89e3\u6790\u670d\u52a1\u5c06IP\u5730\u5740\u8f6c\u6362\u4e3a\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\uff0c\u4ee5\u4fbf\u60a8\u53ef\u4ee5\u83b7\u5f97\u8bbf\u5ba2\u7684\u5927\u81f4\u4f4d\u7f6e\u3002\n\n2. \u5728\u524d\u7aef\uff0c\u5bf9\u5206\u6790\u7684\u6570\u636e\u8fdb\u884c\u66f4\u52a0\u7ec6\u7c92\u5ea6\u7684\u5448\u73b0\u5206\u6790\u8bbf\u5ba2\u8bb0\u5f55\n- \u8bbf\u5ba2\u8ba1\u6570\u5668\uff1a\u5728\u9875\u9762\u4e0a\u663e\u793a\u8bbf\u5ba2\u8ba1\u6570\u5668\uff0c\u663e\u793a\u8bbf\u5ba2\u603b\u6570\u6216\u552f\u4e00\u8bbf\u5ba2\u6570\u91cf\u3002\n- \u8bbf\u5ba2\u5730\u56fe\uff1a\u4f7f\u7528\u5730\u56feAPI\uff0c\u5c06\u8bbf\u5ba2\u7684\u5730\u7406\u4f4d\u7f6e\u53ef\u89c6\u5316\uff0c\u8bbf\u95ee\u8005\u53ef\u4ee5\u770b\u5230\u6765\u81ea\u4e0d\u540c\u5730\u533a\u7684\u8bbf\u95ee\u8005\u5206\u5e03\u60c5\u51b5\u3002\n- \u8bbf\u95ee\u8d8b\u52bf\u56fe\uff1a\u7ed8\u5236\u8bbf\u95ee\u8d8b\u52bf\u56fe\uff0c\u663e\u793a\u4e0d\u540c\u65f6\u95f4\u6bb5\u5185\u7684\u8bbf\u95ee\u6b21\u6570\uff0c\u5e2e\u52a9\u4e86\u89e3\u7f51\u7ad9\u6d41\u91cf\u7684\u9ad8\u5cf0\u548c\u4f4e\u8c37\u3002\n- ...\n\n\u603b\u4e4b \u8bbf\u5ba2\u8bb0\u5f55\u529f\u80fd\u5c06\u4e0a\u9762\u4e09\u4e2a\u5173\u952e\u70b9\u89e3\u51b3\u6389 \u5176\u4ed6\u6570\u636e\u5c31\u53ef\u4ee5\u4efb\u610f\u53d1\u6325\u4e86\n\n**\u4e0d\u660e\u767d\u4e4b\u5904\u6216\u8005\u89c9\u5f97\u5904\u7406\u7684\u4e0d\u597d\u7684\u5730\u65b9\u53ef\u4ee5\u8bc4\u8bba\u533a\u7559\u8a00\uff0c\u671f\u5f85\u548c\u5404\u4f4d\u5927\u4f6c\u7684\u4ea4\u6d41\ud83d\ude0a**\n\n> \u57fa\u4e8evue3\u3001nodejs\u3001mongodb \u4e2a\u4eba\u4e3b\u9875\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee\n[https://gitee.com/Z568_568/ZHOUYI-Homepage.git](https://gitee.com/Z568_568/ZHOUYI-Homepage.git)\n\n",userId:"64aabf3d28f413f08d51cc00",category:"\u603b\u7ed3",viewNum:35,likeNum:0,isReship:!1,recommended:!0,likeToken:[],status:!0,createdAt:"2023-08-16T04:31:46.997Z",updatedAt:"2023-09-06T13:18:36.223Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64db4237a0d58a3cda8cc194",title:"\u3010\u9879\u76ee\u603b\u7ed3\u3011\u5173\u4e8e\u6743\u9650\u7cfb\u7edf\u524d\u540e\u7aef\u7684\u8bbe\u8ba1\u65b9\u6848",cover:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1692086718222.png",abstract:"\u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5e38\u7528\u4e8e\u9700\u8981\u7ba1\u7406\u591a\u79cd\u89d2\u8272\u548c\u590d\u6742\u6743\u9650\u63a7\u5236\u7684\u7cfb\u7edf\u3002\u5b83\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u6839\u636e\u4e0d\u540c\u7684\u7528\u6237\u804c\u80fd\u6765\u914d\u7f6e\u6743\u9650\uff0c\u800c\u4e0d\u5fc5\u5173\u6ce8\u6bcf\u4e2a\u7528\u6237\u7684\u4e2a\u4f53\u6743\u9650\u3002\u8fd9\u79cd\u96c6\u4e2d\u5f0f\u7684\u6743\u9650\u7ba1\u7406\u6a21\u5f0f\u6709\u52a9\u4e8e\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u6269\u5c55\u6027",content:"### \u524d\u8a00\n\u5f00\u53d1 [\u4e2a\u4eba\u4e3b\u9875\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee](https://gitee.com/Z568_568/ZHOUYI-Homepage.git) \u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u60f3\u7740\u5bf9\u9879\u76ee\u4e2d\u7684\u5404\u4e2a\u6280\u672f\u70b9\u8fdb\u884c\u603b\u7ed3\u4e0b\uff0c\u8fd9\u4e5f\u662f\u7b2c\u4e00\u7bc7\u5f00\u59cb\u8bb0\u5f55\u5e76\u5206\u6790\u6280\u672f\u70b9\u7684\u6587\u7ae0\uff0c\u4eca\u5929\u60f3\u8bf4\u4e00\u8bf4\u5173\u4e8e**\u7ba1\u7406\u7aef\u6743\u9650\u7684\u8bbe\u8ba1\u65b9\u6848**\uff0c\u4e5f\u662f\u9879\u76ee\u4e2d\u6700\u4e3a\u5173\u952e\u7684\u90e8\u5206\u3002\n### \u4e3b\u7ebf\u601d\u8def\n\u9879\u76ee\u4e2d\u6211\u91c7\u7528\u7684\u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u5c5e\u4e8e**\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236**\uff08`Role-Based Access Control`\uff0c`RBAC`\uff09\u3002**`RBAC`** \u662f\u4e00\u79cd\u5e38\u89c1\u4e14\u5e7f\u6cdb\u4f7f\u7528\u7684\u6743\u9650\u7ba1\u7406\u6a21\u578b\uff0c\u5b83\u901a\u8fc7\u5c06\u7528\u6237\u5206\u914d\u5230\u4e0d\u540c\u7684\u89d2\u8272\uff0c\u7136\u540e\u5c06\u89d2\u8272\u4e0e\u7279\u5b9a\u7684\u6743\u9650\u5173\u8054\uff0c\u6765\u5b9e\u73b0\u5bf9\u7cfb\u7edf\u8d44\u6e90\u7684\u8bbf\u95ee\u63a7\u5236\u3002\n\n\u57fa\u4e8e`RBAC` \u6a21\u578b\u7684\u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u6709\u56db\u4e2a\u90e8\u5206\uff1a\n\n1. **\u89d2\u8272\uff08Roles\uff09**\uff1a \u89d2\u8272\u662f\u4e00\u7ec4\u7528\u6237\uff0c\u8fd9\u4e9b\u7528\u6237\u5728\u7cfb\u7edf\u4e2d\u5177\u6709\u76f8\u4f3c\u7684\u6743\u9650\u9700\u6c42\u3002\u6bcf\u4e2a\u89d2\u8272\u90fd\u4f1a\u88ab\u5206\u914d\u4e00\u7ec4\u6743\u9650\uff0c\u7136\u540e**\u7528\u6237\u88ab\u5206\u914d\u5230\u89d2\u8272\u800c\u4e0d\u662f\u76f4\u63a5\u5206\u914d\u6743\u9650**\u3002\n2. **\u6743\u9650\uff08Permissions\uff09**\uff1a \u6743\u9650\u5b9a\u4e49\u4e86\u7528\u6237\u53ef\u4ee5\u6267\u884c\u7684\u64cd\u4f5c\u6216\u8bbf\u95ee\u7684\u8d44\u6e90\u3002\u6bcf\u4e2a\u89d2\u8272\u90fd\u4f1a\u88ab\u6388\u4e88\u4e00\u7ec4\u6743\u9650\uff0c\u8fd9\u4e9b\u6743\u9650\u5b9a\u4e49\u4e86\u8be5\u89d2\u8272\u6240\u80fd\u6267\u884c\u7684\u64cd\u4f5c\u3002\n3. **\u7528\u6237\uff08Users\uff09**\uff1a \u7528\u6237\u662f\u7cfb\u7edf\u7684\u6700\u7ec8\u64cd\u4f5c\u8005\u3002\u6bcf\u4e2a\u7528\u6237\u90fd\u4f1a\u88ab\u5206\u914d\u4e00\u4e2a\u6216\u591a\u4e2a\u89d2\u8272\uff08\u9879\u76ee\u4e2d\u6ca1\u6709\u4f7f\u7528\u591a\u89d2\u8272\uff09\uff0c\u8fd9\u4e9b\u89d2\u8272\u51b3\u5b9a\u4e86\u4ed6\u4eec\u5728\u7cfb\u7edf\u4e2d\u7684\u6743\u9650\u3002\n4. **\u524d\u7aef\u8def\u7531\u5339\u914d** \uff1a \u524d\u7aef\u6839\u636e\u7528\u6237\u7684\u89d2\u8272\u548c\u6743\u9650\u4fe1\u606f\uff0c\u52a8\u6001\u751f\u6210\u83dc\u5355\u548c\u8def\u7531\u3002\u8fd9\u610f\u5473\u7740\u5f53\u7528\u6237\u767b\u5f55\u7cfb\u7edf\u65f6\uff0c\u524d\u7aef\u4f1a\u6839\u636e\u7528\u6237\u7684\u89d2\u8272\u67e5\u8be2\u5176\u5bf9\u5e94\u7684\u6743\u9650\uff0c\u7136\u540e\u6839\u636e\u6743\u9650\u914d\u7f6e\u6765\u6e32\u67d3\u51fa\u9002\u5f53\u7684\u83dc\u5355\u548c\u9875\u9762\u3002\n\n\u5728 `RBAC` \u6a21\u578b\u4e2d\uff0c\u89d2\u8272\u5145\u5f53\u4e86\u7528\u6237\u548c\u6743\u9650\u4e4b\u95f4\u7684\u4e2d\u4ecb\uff0c\u7b80\u5316\u4e86\u6743\u9650\u7ba1\u7406\u548c\u7ef4\u62a4\u3002\n\n### \u540e\u7aef\u6570\u636e\u5e93\u8bbe\u8ba1\n\n<a href=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1692086718222.png\" target=\"_blank\">\n<img src=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1692086718222.png\" alt=\"1692086718222.png\" width=\"100%\">\n</a>\n\n\u5728\u4e0a\u56fe\u4e2d\u53ef\u4ee5\u770b\u5230\u6709\u5f20\u6743\u9650\u8868\u91cc\u9762\u6570\u636e\u90fd\u662f\u5404\u79cd\u64cd\u4f5c\u63a5\u53e3\u7684\u6807\u8bc6\uff1a\u7528\u6237\u67e5\u8be2\u64cd\u4f5c `sys:users:list`\u3001\u89d2\u8272\u67e5\u8be2\u64cd\u4f5c `sys:roles:list` \u3001\u6743\u9650\u7ba1\u7406\u67e5\u8be2\u64cd\u4f5c`sys:permissions:list`\u3002\u5f88\u5bb9\u6613\u770b\u51fa\u6743\u9650\u57fa\u672c\u5173\u7cfb\u662f\uff1a**\u5f53\u7528\u6237\u767b\u5f55\u540e\u518d\u67e5\u8be2\u51fa\u89d2\u8272\u4fe1\u606f\uff0c\u7136\u540e\u5173\u8054\u51fa\u89d2\u8272\u5bf9\u5e94\u7684\u6743\u9650\u4fe1\u606f**\u3002\n\n### \u524d\u7aef\u6743\u9650\u8bbe\u8ba1\n\u539f\u7406\uff1a**\u6839\u636e\u6743\u9650\u8868\u6570\u636e\u548c\u8def\u7531\u5143\u4fe1\u606f\u8fdb\u884c\u5339\u914d\uff0c\u7136\u540e\u7b5b\u9009\u51fa\u5bf9\u5e94\u7684\u83dc\u5355**\n\n1. \u8def\u7531\u8bbe\u8ba1\n\n\u4f8b\u5982 \u4e0b\u9762\u5b9a\u4e49\u4e86\u7528\u6237\u7ba1\u7406\u3001\u89d2\u8272\u7ba1\u7406\u548c\u6743\u9650\u7ba1\u7406\u7684\u83dc\u5355\u8def\u7531\uff0c\u5176\u4e2d\u7684`meta`\u5143\u4fe1\u606f\u4e2d `perms`\u5b57\u6bb5\u914d\u7f6e\u6709\u8be5\u83dc\u5355\u7684\u6240\u6709\u64cd\u4f5c\u6743\u9650\u6807\u8bc6\n\n``` js\n[\n {\n    path: '/dir-users-info',\n    name: 'dir-users-info',\n    meta: {\n           title: '\u7528\u6237\u7ba1\u7406',\n           icon: 'yonghuguanli',\n           requiresAuth: true,\n           perms: [\n                   'sys:users:list',\n                   'sys:users:create',\n                   'sys:users:update',\n                   'sys:users:delete',\n                 ],\n           },\n    component: () => import('@/views/sys/users/dir-users-info.vue'),\n},\n {\n    path: '/dir-roles-info',\n    name: 'dir-roles-info',\n    meta: {\n           title: '\u89d2\u8272\u7ba1\u7406',\n           icon: 'yonghuguanli',\n           requiresAuth: true,\n           perms: [\n                   'sys:roles:list',\n                   'sys:roles:create',\n                   'sys:roles:update',\n                   'sys:roles:delete',\n                 ],\n           },\n    component: () => import('@/views/sys/users/dir-roles-info.vue'),\n},\n {\n    path: '/dir-permissions-info',\n    name: 'dir-permissions-info',\n    meta: {\n           title: '\u6743\u9650\u7ba1\u7406',\n           icon: 'yonghuguanli',\n           requiresAuth: true,\n           perms: [\n                   'sys:permissions:list',\n                   'sys:permissions:create',\n                   'sys:permissions:update',\n                   'sys:permissions:delete',\n                 ],\n           },\n    component: () => import('@/views/sys/users/dir-permissions-info.vue'),\n}\n]\n```\n2. \u68c0\u67e5\u8def\u7531\u5bf9\u8c61\u662f\u5426\u5177\u6709\u6743\u9650\n\n``` js\n/**\n * \u68c0\u67e5\u8def\u7531\u5bf9\u8c61\u662f\u5426\u5177\u6709\u6743\u9650\n * @param {Array} perms - \u6743\u9650\u5217\u8868\n * @param {Object} route - \u8def\u7531\u5bf9\u8c61\n * @returns {boolean} - \u662f\u5426\u5177\u6709\u6743\u9650\n */\nfunction hasPermission(perms, route) {\n    if (route.meta && route.meta.perms) {\n        // \u5982\u679c\u8def\u7531\u5bf9\u8c61\u5b9a\u4e49\u4e86 meta \u5c5e\u6027\u6216\u8005\u5b9a\u4e49 meta.perms \u5c5e\u6027\uff0c\u90a3\u4e48\u5c31\u6839\u636e\u6743\u9650\u503c\u6765\u5224\u65ad\u662f\u5426\u5177\u6709\u6743\u9650\n        return perms.some(perm => route.meta.perms.includes(perm))\n    } else {\n        // \u5982\u679c\u8def\u7531\u5bf9\u8c61\u6ca1\u6709\u5b9a\u4e49 meta \u5c5e\u6027\u6216\u8005\u6ca1\u6709\u5b9a\u4e49 meta.perms \u5c5e\u6027\uff0c\u90a3\u4e48\u9ed8\u8ba4\u8ba4\u4e3a\u5177\u6709\u6743\u9650\uff0c\u8fd4\u56de true\u3002\n        return true\n    }\n}\n```\n3. \u9012\u5f52\u6240\u6709\u8def\u7531\u8868\u6839\u636e\u6743\u9650\u5217\u8868\u7b5b\u9009\u5f02\u6b65\u8def\u7531\uff1a\n``` js\n/**\n * \u6839\u636e\u6743\u9650\u5217\u8868\u7b5b\u9009\u5f02\u6b65\u8def\u7531\u914d\u7f6e\n * @param {Array} routes - \u8def\u7531\u914d\u7f6e\u8868\n * @param {Array} perms - \u6743\u9650\u5217\u8868\n * @returns {Array} - \u7b5b\u9009\u540e\u7684\u8def\u7531\u914d\u7f6e\n */\nfunction filterAsyncRouter(routes, perms) {\n    const res = []\n\n    routes.forEach(route => {\n        // \u521b\u5efa\u4e34\u65f6\u53d8\u91cf tmp  \u53ef\u4ee5\u5728\u540e\u7eed\u7684\u64cd\u4f5c\u4e2d\u4e0d\u4f1a\u4fee\u6539\u539f\u59cb\u7684\u8def\u7531\u5bf9\u8c61\u3002\n        const tmp = {...route}\n        if (!tmp.hidden && tmp.children) {\n            // \u5148\u5bf9\u5b50\u8def\u7531\u8fdb\u884c\u6df1\u5ea6\u7b5b\u9009\uff0c\u786e\u4fdd\u5b50\u8def\u7531\u4e5f\u7b26\u5408\u6743\u9650\u8981\u6c42\n            tmp.children = filterAsyncRouter(tmp.children, perms)\n            if (tmp.children && tmp.children.length > 0) {\n                res.push(tmp)\n            }\n        } else {\n            // \u5bf9\u4e8e\u6ca1\u6709\u5b50\u8def\u7531\u7684\u8def\u7531\u5bf9\u8c61\uff0c\u76f4\u63a5\u8fdb\u884c\u6743\u9650\u5224\u65ad\n            if (!tmp.hidden && hasPermission(perms, tmp)) {\n                res.push(tmp)\n            }\n        }\n    })\n\n    return res\n}\n```\n4. \u751f\u6210\u51fa\u8be5\u7528\u6237\u5177\u6709\u6743\u9650\u7684\u8def\u7531\u8868\uff1a\n``` js\nexport const menuList = function () {\n    const asyncRoutes = useRouter().options.routes[0].children.filter(e => !e.hidden)\n    //\u7b5b\u9009\u8def\u7531\u8868\n    const permissionList = dbUtils.get('perms');\n    if (!permissionList.length) {\n        // \u6e05\u7a7a\u6240\u6709\u7f13\u5b58\u6570\u636e\n        dbUtils.clear()\n        // \u91cd\u7f6e\u8def\u7531\u91cd\u65b0\u767b\u5f55\n        return useRouter().replace('/login')\n    }\n    let accessedRouters\n\n    if (permissionList.includes('*')) {\n        // \u5982\u679c\u662f\u8d85\u7ea7\u7ba1\u7406\u5458\u5219\u65e0\u9700\u6743\u9650\u9a8c\u8bc1\n        accessedRouters = asyncRoutes\n    } else {\n        accessedRouters = filterAsyncRouter(asyncRoutes, permissionList);\n    }\n    return accessedRouters\n}\n```\n\n5. \u5c06\u751f\u6210\u597d\u7684\u8def\u7531\u8868\u53bb\u6e32\u67d3\u524d\u7aef\u83dc\u5355\u3002\u524d\u7aef\u5de5\u4f5c\u57fa\u672c\u7ed3\u675f\n\n### \u540e\u7aef\u6743\u9650\u8bbe\u8ba1\n\u539f\u7406\uff1a\u662f\u5bf9\u6bcf\u4e2a\u8bf7\u6c42\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1 **\u6bcf\u4e2a\u8bf7\u6c42\u524d\u7aef\u90fd\u4f1a\u643a\u5e26token,\u57fa\u4e8e\u8fd9\u4e2a\u4fe1\u606f\u6765\u8fdb\u884c\u9a8c\u8bc1\u7528\u6237\u7684\u6743\u9650** \n\n\u5176\u4e2d\u4f1a\u7ecf\u8fc7\u4e24\u8f6e\u7684\u9a8c\u8bc1\uff1a**token\u9a8c\u8bc1** \u548c **\u63a5\u53e3\u6743\u9650\u9a8c\u8bc1** \u4ee5\u786e\u4fdd\u6570\u636e\u7684\u5b89\u5168\u6027\n\n1. \u9996\u5148\u8fdb\u884c`token`\u9a8c\u8bc1\n\u4f7f\u7528`express-jwt` \u6765\u8fdb\u884c`token\u7684\u8eab\u4efd\u9a8c\u8bc1`\u3001\u7136\u540e\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u548cid\u5230req\u5bf9\u8c61\u4e2d\n``` js\n/**\n * Token \u8eab\u4efd\u9a8c\u8bc1\u4e2d\u95f4\u4ef6\n * \n * @param {Object} req - \u8bf7\u6c42\u5bf9\u8c61\n * @param {Object} res - \u54cd\u5e94\u5bf9\u8c61\n * @param {Function} next - \u4e0b\u4e00\u4e2a\u4e2d\u95f4\u4ef6\u51fd\u6570\n * @returns {void}\n * @throws {Error} - \u5982\u679c\u8eab\u4efd\u9a8c\u8bc1\u5931\u8d25\uff0c\u5219\u629b\u51fa\u9519\u8bef\n */\nconst {expressjwt: jwt} = require(\"express-jwt\");\n\nfunction tokenAuthentication(req, res, next) {\n    jwt({\n        secret: process.env.SIGN_KEY,\n        algorithms: ['HS256'],\n        requestProperty: 'user',\n        credentialsRequired: true,\n        getToken: function fromHeaderOrQuerystring(req, res) {\n            if (req.headers.authorization &&\n                req.headers.authorization.split(\" \")[0] === \"Bearer\") {\n                return req.headers.authorization.split(\" \")[1];\n            } else if (req.query && req.query.token) {\n                return req.query.token;\n            }\n            return null;\n        },\n    })(req, res, function (err) {\n        if (err) {\n            //\u629b\u51fa\u9519\u8bef\u7ed9\u5168\u5c40\u9519\u8bef\u4fe1\u606f\u5904\u7406\n            return next(err);\n        }\n        req.userId = req.user._id;\n        next();\n    });\n}\n\nmodule.exports = tokenAuthentication;\n```\n2. \u63a5\u53e3\u6743\u9650\u9a8c\u8bc1\n\u5c06req\u5bf9\u8c61\u4e2d\u643a\u5e26\u7528\u6237\u4fe1\u606f\u7684user\u5b57\u6bb5\u53d6\u51fa\u8fdb\u884c\u64cd\u4f5c\n\n``` js\n// \u9a8c\u8bc1\u63a5\u53e3\u6743\u9650 auth:'\u63a5\u53e3\u7684\u9884\u8bbe\u6743\u9650' \n// \u793a\u4f8b\uff1acheckApiPermission('sys:users:list')\n\nconst checkApiPermission = (auth) => {\n    return async (req, res, next) => {\n        try {\n            const roleInfo = await RolesModel.findById(req.user.roleId)\n            if (!roleInfo) return log.error('\u8be5\u7528\u6237\u8fd8\u672a\u5206\u914d\u89d2\u8272')\n            if (roleInfo) {\n                if (!roleInfo.status) {\n                    apiResponse.unauthorizedResponse(res, '\u60a8\u7684\u89d2\u8272\u5df2\u88ab\u7981\u7528,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458')\n                    return false\n                }\n                // \u5bf9\u8d85\u7ea7\u7ba1\u7406\u5458\u6216\u5176\u4ed6\n                if (roleInfo.perms.includes('*') || roleInfo.perms.includes(auth)) {\n                    const permissionInfo = await PermissionsModel.findOne({key: auth})\n                    // \u6743\u9650\u5df2\u88ab\u7981\u7528\n                    if (!roleInfo.perms.includes('*') && !permissionInfo.status) {\n                        return apiResponse.unauthorizedResponse(res, '\u60a8\u8bbf\u95ee\u7684\u6743\u9650\u5df2\u88ab\u7981\u7528\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458')\n                    }\n                    // \u63a5\u53e3\u9a8c\u8bc1\u901a\u8fc7\uff0c\u7ee7\u7eed\u4e0b\u4e00\u6b65\u4e2d\u95f4\u4ef6\u6216\u5904\u7406\u7a0b\u5e8f\n                    return next();\n                } else {\n                    return apiResponse.unauthorizedResponse(res, '\u60a8\u6682\u65f6\u6ca1\u6709\u6743\u9650\u8bbf\u95ee,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458')\n                }\n            }\n\n        } catch (err) {\n            return apiResponse.unauthorizedResponse(res, '\u63a5\u53e3\u6743\u9650\u9a8c\u8bc1\u9519\u8bef')\n        }\n    };\n};\n```\n\n### \u603b\u7ed3\n1. \u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u7684\u7f3a\u70b9\uff1a\n  1.1 \u524d\u7aef\u9875\u9762\u914d\u7f6e\u7e41\u7410\uff1a \u5728\u65b0\u589e\u5e26\u6709\u6743\u9650\u7684\u9875\u9762\u65f6\uff0c\u9700\u8981\u5728\u8def\u7531\u8868\u548c\u6743\u9650\u7ba1\u7406\u4e2d\u90fd\u8fdb\u884c\u914d\u7f6e\u3002\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u7ef4\u62a4\u65f6\u7684\u4e00\u4e9b\u4e0d\u4fbf\uff0c\u7279\u522b\u662f\u5f53\u529f\u80fd\u6a21\u5757\u8f83\u591a\u65f6\u3002\n1.2 \u524d\u7aef\u83dc\u5355\u81ea\u5b9a\u4e49\u9650\u5236\uff1a \u65b9\u6848\u4e2d\u7684\u524d\u7aef\u83dc\u5355\u914d\u7f6e\u53ef\u80fd\u53d7\u9650\u4e8e\u4ec5\u80fd\u63a7\u5236\u83dc\u5355\u548c\u7528\u6237\u7684\u6743\u9650\u5173\u7cfb\uff0c\u800c\u5bf9\u4e8e\u83dc\u5355\u7684\u5c55\u793a\u5185\u5bb9\u3001\u6837\u5f0f\u3001\u56fe\u6807\u7b49\u65b9\u9762\u7684\u5b9a\u5236\u53ef\u80fd\u9700\u8981\u4fee\u6539\u524d\u7aef\u6e90\u4ee3\u7801\uff0c\u589e\u52a0\u4e86\u5b9a\u5236\u5316\u7684\u590d\u6742\u5ea6\u3002\n1.3 \u524d\u540e\u7aef\u534f\u8c03\uff1a \u9700\u8981\u786e\u4fdd\u524d\u540e\u7aef\u4e4b\u95f4\u9884\u8bbe\u7684\u6743\u9650\u6807\u8bc6\u4fdd\u6301\u4e00\u81f4\uff0c\u4ee5\u907f\u514d\u51fa\u73b0\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\u3002\u8fd9\u9700\u8981\u8fdb\u884c\u524d\u540e\u7aef\u7684\u5bc6\u5207\u534f\u8c03\uff0c\u4ee5\u786e\u4fdd\u6743\u9650\u9a8c\u8bc1\u7684\u4e00\u81f4\u6027\u3002\n2. \u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u7684\u4f18\u70b9\uff1a\n  2.1 \u7075\u6d3b\u6027\u548c\u53ef\u6269\u5c55\u6027\uff1a \u5f53\u7cfb\u7edf\u9700\u8981\u65b0\u589e\u529f\u80fd\u6216\u8fdb\u884c\u6743\u9650\u8c03\u6574\u65f6\uff0c\u53ea\u9700\u66f4\u65b0\u89d2\u8272\u7684\u6743\u9650\u914d\u7f6e\uff0c\u800c\u65e0\u9700\u9010\u4e2a\u8c03\u6574\u7528\u6237\u7684\u6743\u9650\u3002\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u5f97\u6743\u9650\u7684\u8c03\u6574\u66f4\u4e3a\u96c6\u4e2d\u548c\u9ad8\u6548\uff0c\u4e5f\u964d\u4f4e\u4e86\u51fa\u9519\u7684\u53ef\u80fd\u6027\u3002\n  2.2 \u4ee3\u7801\u7ef4\u62a4\u4fbf\u6377\uff1a \u5c06\u6743\u9650\u903b\u8f91\u96c6\u4e2d\u5728\u4e00\u5904\uff0c\u5373\u6743\u9650\u7ba1\u7406\u90e8\u5206\uff0c\u53ef\u4ee5\u4f7f\u4ee3\u7801\u66f4\u6613\u4e8e\u7ef4\u62a4\u548c\u7406\u89e3\u3002\u540c\u65f6\uff0c\u6743\u9650\u7684\u53d8\u66f4\u5bf9\u5176\u4ed6\u90e8\u5206\u7684\u5f71\u54cd\u8f83\u5c0f\uff0c\u964d\u4f4e\u4e86\u7ef4\u62a4\u6210\u672c\u3002\n\n\u8fd9\u79cd\u6743\u9650\u8bbe\u8ba1\u65b9\u6848\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5e38\u7528\u4e8e\u9700\u8981\u7ba1\u7406\u591a\u79cd\u89d2\u8272\u548c\u590d\u6742\u6743\u9650\u63a7\u5236\u7684\u7cfb\u7edf\u3002\u5b83\u5141\u8bb8\u7cfb\u7edf\u7ba1\u7406\u5458\u6839\u636e\u4e0d\u540c\u7684\u7528\u6237\u804c\u80fd\u6765\u914d\u7f6e\u6743\u9650\uff0c\u800c\u4e0d\u5fc5\u5173\u6ce8\u6bcf\u4e2a\u7528\u6237\u7684\u4e2a\u4f53\u6743\u9650\u3002\u8fd9\u79cd\u96c6\u4e2d\u5f0f\u7684\u6743\u9650\u7ba1\u7406\u6a21\u5f0f\u6709\u52a9\u4e8e\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u53ef\u6269\u5c55\u6027\u3002\n\n\u7136\u800c\uff0c\u4e5f\u53ef\u4ee5\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4e00\u4e9b\u8c03\u6574\uff0c\u4ee5\u5e73\u8861\u7075\u6d3b\u6027\u548c\u7ba1\u7406\u6210\u672c\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u524d\u7aef\u7684\u83dc\u5355\u548c\u9875\u9762\u5c55\u793a\u5b9a\u5236\u5316\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u5f15\u5165\u4e00\u4e9b\u914d\u7f6e\u6587\u4ef6\u6216\u8005\u4ece\u540e\u7aef\u52a8\u6001\u83b7\u53d6\u4fe1\u606f\uff0c\u4ee5\u51cf\u5c11\u524d\u7aef\u6e90\u4ee3\u7801\u7684\u4fee\u6539\u3002\n\n**\u4e0d\u660e\u767d\u4e4b\u5904\u6216\u8005\u89c9\u5f97\u5904\u7406\u7684\u4e0d\u597d\u7684\u5730\u65b9\u53ef\u4ee5\u8bc4\u8bba\u533a\u7559\u8a00\uff0c\u671f\u5f85\u548c\u5404\u4f4d\u5927\u4f6c\u7684\u4ea4\u6d41\ud83d\ude0a**\n\n> \u57fa\u4e8evue3\u3001nodejs\u3001mongodb \u4e2a\u4eba\u4e3b\u9875\u524d\u540e\u7aef\u5206\u79bb\u9879\u76ee \n[https://gitee.com/Z568_568/ZHOUYI-Homepage.git](https://gitee.com/Z568_568/ZHOUYI-Homepage.git)",userId:"64aabf3d28f413f08d51cc00",category:"\u603b\u7ed3",viewNum:20,likeNum:0,isReship:!1,recommended:!0,likeToken:[],status:!0,createdAt:"2023-08-15T09:15:35.563Z",updatedAt:"2023-09-06T04:08:07.073Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64d9ca3da0d58a3cda8cbf31",title:"\u539f\u751f\u9879\u76ee\u4f7f\u7528Webpack\u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8\u548c\u70ed\u66f4\u65b0html",cover:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691994584741.png",abstract:"\u5f53\u6d89\u53ca\u5230\u524d\u7aef\u5f00\u53d1\u4e2d\u7684\u5b9e\u65f6\u9884\u89c8\u548c\u70ed\u66f4\u65b0\uff0cWebpack \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86\u70ed\u6a21\u5757\u66ff\u6362\uff08HMR\uff09\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u5237\u65b0\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u65f6\u67e5\u770b\u4ee3\u7801\u7684\u4fee\u6539\u3002\u5982\u4f55\u5728\u9879\u76ee\u4e2d\u914d\u7f6e\u548c\u4f7f\u7528Webpack",content:" <a href=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691994623945.gif\" target=\"_blank\">\n<img src=\"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691994623945.gif\" alt=\"1691994623945.gif\" width=\"100%\">\n</a>\n\n\n\u5f53\u6d89\u53ca\u5230\u524d\u7aef\u5f00\u53d1\u4e2d\u7684\u5b9e\u65f6\u9884\u89c8\u548c\u70ed\u66f4\u65b0\uff0cWebpack \u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86\u70ed\u6a21\u5757\u66ff\u6362\uff08Hot Module Replacement\uff0cHMR\uff09\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u5237\u65b0\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u65f6\u67e5\u770b\u4ee3\u7801\u7684\u4fee\u6539\u3002\u5982\u4f55\u5728\u9879\u76ee\u4e2d\u914d\u7f6e\u548c\u4f7f\u7528Webpack\u7684HMR\u529f\u80fd\uff0c\u4ee5\u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8\u548c\u70ed\u66f4\u65b0\u6548\u679c\u3002\n\n#### \u4ec0\u4e48\u662f\u70ed\u6a21\u5757\u66ff\u6362\uff08HMR\uff09\uff1f\n\n\u70ed\u6a21\u5757\u66ff\u6362\uff08HMR\uff09\u662f\u4e00\u79cd\u524d\u7aef\u5f00\u53d1\u5de5\u5177\uff0c\u5b83\u5141\u8bb8\u5728\u4e0d\u5237\u65b0\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\uff0c\u66f4\u65b0\u4ee3\u7801\u548c\u8d44\u6e90\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u4fee\u6539\u4ee3\u7801\u65f6\u7acb\u5373\u770b\u5230\u6548\u679c\uff0c\u800c\u4e0d\u9700\u8981\u7b49\u5f85\u6574\u4e2a\u9875\u9762\u91cd\u65b0\u52a0\u8f7d\u3002HMR \u5c06\u53ea\u66f4\u65b0\u4fee\u6539\u8fc7\u7684\u6a21\u5757\uff0c\u800c\u4fdd\u7559\u5e94\u7528\u7a0b\u5e8f\u7684\u72b6\u6001\u3002\n\n#### \u70ed\u66f4\u65b0\u6709\u4ec0\u4e48\u597d\u5904\n\u70ed\u66f4\u65b0\uff08Hot Module Replacement\uff0cHMR\uff09\u662f\u4e00\u4e2a\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u975e\u5e38\u6709\u7528\u7684\u529f\u80fd\uff0c\u5c24\u5176\u5728\u5927\u578b\u590d\u6742\u7684\u9879\u76ee\u4e2d\u3002\u5c3d\u7ba1\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u89c9\u5f97\u5f88\u96be\u5bdf\u89c9\u5230\u5b83\u7684\u4f18\u52bf\uff0c\u4f46\u5b9e\u9645\u4e0a\u5b83\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e9b\u91cd\u8981\u7684\u597d\u5904\uff1a\n1. \u5b9e\u65f6\u9884\u89c8\uff1a \u5728\u5f00\u542f\u70ed\u66f4\u65b0\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u5728\u4e0d\u5237\u65b0\u6574\u4e2a\u9875\u9762\u7684\u60c5\u51b5\u4e0b\u5b9e\u65f6\u67e5\u770b\u4ee3\u7801\u7684\u66f4\u6539\u3002\u8fd9\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\u8282\u7701\u5237\u65b0\u9875\u9762\u7684\u65f6\u95f4\u3002\n2. \u4fdd\u6301\u5e94\u7528\u72b6\u6001\uff1a HMR \u5141\u8bb8\u5728\u4fee\u6539\u4ee3\u7801\u65f6\u4fdd\u6301\u5e94\u7528\u7a0b\u5e8f\u7684\u72b6\u6001\u3002\u5982\u679c\u4f60\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5df2\u7ecf\u6267\u884c\u4e86\u67d0\u4e9b\u64cd\u4f5c\uff08\u4f8b\u5982\u586b\u5199\u8868\u5355\u3001\u5c55\u5f00\u6298\u53e0\u83dc\u5355\u7b49\uff09\uff0c\u5728\u4ee3\u7801\u66f4\u65b0\u540e\uff0c\u8fd9\u4e9b\u72b6\u6001\u5c06\u88ab\u4fdd\u7559\u4e0b\u6765\uff0c\u800c\u4e0d\u4f1a\u50cf\u5237\u65b0\u6574\u4e2a\u9875\u9762\u90a3\u6837\u4e22\u5931\u3002\n3. \u5feb\u901f\u53cd\u9988\u5faa\u73af\uff1a HMR \u53ef\u4ee5\u5728\u4f60\u4fee\u6539\u4ee3\u7801\u540e\u7acb\u5373\u663e\u793a\u7ed3\u679c\uff0c\u8fd9\u6709\u52a9\u4e8e\u5feb\u901f\u8fed\u4ee3\u548c\u8c03\u8bd5\u3002\n4. \u65e0\u9700\u624b\u52a8\u5237\u65b0\uff1a \u5728\u70ed\u66f4\u65b0\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u65e0\u9700\u624b\u52a8\u5237\u65b0\u6d4f\u89c8\u5668\uff0c\u8fd9\u5728\u5927\u9879\u76ee\u4e2d\u7279\u522b\u6709\u7528\u3002\n5. \u6a21\u5757\u7ea7\u522b\u66f4\u65b0\uff1a HMR \u4e0d\u4ec5\u4ec5\u5c40\u9650\u4e8e JavaScript \u6587\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u5e94\u7528\u4e8e CSS\u3001\u6a21\u677f\u7b49\u8d44\u6e90\uff0c\u4ee5\u53ca\u4f60\u53ef\u80fd\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u7684\u5176\u4ed6\u6a21\u5757\u3002\n\n#### \u914d\u7f6eWebpack\u4ee5\u542f\u7528HMR\n\u9996\u5148\uff0c\u786e\u4fdd\u4f60\u7684\u9879\u76ee\u5df2\u7ecf\u4f7f\u7528Webpack\u8fdb\u884c\u914d\u7f6e\u3002\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u914d\u7f6eWebpack\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5f00\u59cb\uff1a\n\n1. \u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a package.json \u6587\u4ef6\uff0c\u5982\u679c\u8fd8\u6ca1\u6709\u7684\u8bdd\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u521d\u59cb\u5316\uff1a\n ```shell\nnpm init -y\n```\n2. \u5b89\u88c5Webpack\u53ca\u5176\u76f8\u5173\u4f9d\u8d56\uff1a\n ```shell\nnpm install webpack webpack-cli webpack-dev-server --save-dev\n```\n3. \u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a src \u6587\u4ef6\u5939\uff0c\u5e76\u5728\u5176\u4e2d\u521b\u5efa\u4e00\u4e2a index.html \u548c index.js \u6587\u4ef6\u4f5c\u4e3a\u5165\u53e3\u6587\u4ef6\u3002\n\n4. \u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a webpack.config.js \u6587\u4ef6\u6765\u914d\u7f6eWebpack\uff1a\n``` js\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nmodule.exports = {\n    mode: 'development', // \u8bbe\u7f6e\u5f00\u53d1\u73af\u5883\n    entry: './src/index.js',\n    output: {\n        filename: 'bundle.js',\n        path: path.resolve(__dirname, 'dist')\n    },\n\n    devServer: {\n        hot: true,\n        port: 3000 // \u4f7f\u7528\u4e0d\u540c\u7684\u7aef\u53e3\u53f7\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            template: './src/index.html',\n            filename: 'index.html' // \u8f93\u51fa\u7684 HTML \u6587\u4ef6\u540d\n        })\n    ]\n};\n\n```\n\u5728\u4e0a\u8ff0\u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u542f\u7528\u4e86 hot: true\uff0c\u8fd9\u5c06\u542f\u7528Webpack Dev Server\u7684HMR\u529f\u80fd\u3002\n#### \u7f16\u5199\u5b9e\u65f6\u9884\u89c8\u7684\u4ee3\u7801\n\u5728\u5165\u53e3\u6587\u4ef6 src/index.html \u4e2d\uff0c\u6dfb\u52a0\u4e00\u4e9b\u7b80\u5355\u7684\u4ee3\u7801\u6765\u6d4b\u8bd5HMR\u3002\u4f8b\u5982\uff1a\n``` js\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Webpack \u5b9e\u65f6\u9884\u89c8</title>\n    <style>\n        body {\n            text-align: center;\n        }\n\n        h1 {\n            color: #0e59c7;\n        }\n\n        p {\n            color: #0e59c7;\n            font-family: \u534e\u6587\u6977\u4f53;\n            font-size: 2rem;\n        }\n    </style>\n</head>\n<body>\n\n</body>\n</html>\n```\n\u5728\u5165\u53e3\u6587\u4ef6 src/index.js \u4e2d\uff0c\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e9b\u7b80\u5355\u7684\u4ee3\u7801\u6765\u6d4b\u8bd5HMR\u3002\u4f8b\u5982\uff1a\n``` js\nfunction component() {\n    const element = document.createElement('h1');\n    element.textContent = 'Hello, Webpack \u70ed\u66f4\u65b0!';\n    return element;\n}\n\nfunction component2() {\n    const element = document.createElement('p');\n    element.textContent = 'Webpack Dev Server \u70ed\u66f4\u65b0\u5c06\u4f1a\u89e6\u53d1\u6d4f\u89c8\u5668\u7684\u5c40\u90e8\u81ea\u52a8\u5237\u65b0\uff0c\u4ee5\u52a0\u8f7d\u6700\u65b0\u7684\u6587\u4ef6\u5185\u5bb9\uff0c\u66f4\u65b0\u9875\u9762\u663e\u793a\u3002\u8fd9\u5c06\u8ba9\u4f60\u4e00\u8fb9\u4fee\u6539\u4ee3\u7801\uff0c\u4e00\u8fb9\u770b\u5230\u5b9e\u65f6\u7684\u6548\u679c\uff0c\u5c31\u50cf\u662f\u5728\u5237\u65b0\u9875\u9762\u4e00\u6837\u3002';\n    return element;\n}\n\ndocument.body.appendChild(component());\ndocument.body.appendChild(component2());\n```\n#### \u8fd0\u884cWebpack Dev Server\n\u5728package.json\u4e2d\u6dfb\u52a0\u542f\u52a8\u547d\u4ee4\n``` js\n \"scripts\": {\n    \"start\": \"webpack serve --open\"\n  },\n```\n\u6253\u5f00\u7ec8\u7aef\u8f93\u5165\u547d\u4ee4\n``` js\nnpm start\n```\n\n\u73b0\u5728\uff0c\u5f53\u4fee\u6539 src/index.js \u6587\u4ef6\u4e2d\u7684\u4ee3\u7801\u65f6\uff0cWebpack Dev Server \u5c06\u4f1a\u81ea\u52a8\u68c0\u6d4b\u53d8\u5316\u5e76\u89e6\u53d1\u70ed\u66f4\u65b0\u3002\u4f60\u4f1a\u770b\u5230\u6d4f\u89c8\u5668\u4e2d\u7684\u9875\u9762\u7acb\u5373\u66f4\u65b0\uff0c\u800c\u4e0d\u9700\u8981\u624b\u52a8\u5237\u65b0\u3002\n\n#### \u603b\u7ed3\n\u901a\u8fc7\u914d\u7f6eWebpack\u548c\u4f7f\u7528\u5176\u70ed\u6a21\u5757\u66ff\u6362\uff08HMR\uff09\u529f\u80fd\uff0c\u53ef\u4ee5\u5728\u524d\u7aef\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5b9e\u73b0\u5b9e\u65f6\u9884\u89c8\u548c\u70ed\u66f4\u65b0\u3002\u8fd9\u5927\u5927\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\uff0c\u53ef\u4ee5\u5728\u4fee\u6539\u4ee3\u7801\u65f6\u7acb\u5373\u770b\u5230\u6548\u679c\uff0c\u800c\u4e0d\u9700\u8981\u7b49\u5f85\u6574\u4e2a\u9875\u9762\u91cd\u65b0\u52a0\u8f7d\u3002Webpack Dev Server\u7684HMR\u529f\u80fd\u4f7f\u5f97\u524d\u7aef\u5f00\u53d1\u66f4\u52a0\u6d41\u7545\u548c\u9ad8\u6548\u3002\n\n\n\n#### \u6700\u540e\n\n\u53ef\u4ee5\u6539\u53d8 ` hot: false` \u6765\u5c1d\u8bd5\u4e00\u4e0b\u5c31\u4f1a\u53d1\u73b0 \u76f4\u63a5\u53bb\u4fee\u6539html \u6587\u4ef6\u53ef\u4ee5\u6d4f\u89c8\u5668\u81ea\u52a8\u5237\u65b0\u7684\u529f\u80fd\n``` js\n  devServer: {\n        hot: false,\n        port: 3000 // \u4f7f\u7528\u4e0d\u540c\u7684\u7aef\u53e3\u53f7\n    },\n```\n---\n\n#### \u5176\u4ed6\u81ea\u52a8\u5237\u65b0\u6280\u672f\nBrowsersync \u662f\u4e00\u4e2a\u7528\u4e8e\u5f00\u53d1\u7684\u5de5\u5177\uff0c\u5b83\u53ef\u4ee5\u5728\u591a\u4e2a\u6d4f\u89c8\u5668\u4e2d\u540c\u6b65\u663e\u793a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u81ea\u52a8\u5237\u65b0\u9875\u9762\u3002\u5b83\u652f\u6301 HTML\u3001CSS \u548c JavaScript \u7684\u81ea\u52a8\u5237\u65b0\u3002\n\u5b89\u88c5 Browsersync\uff1a\n\n ``` shell\nnpm install browser-sync --save-dev\n```\n\n\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a bs-config.js \u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a\n\n``` javascript\nCopy code\nmodule.exports = {\n  files: ['./src/**/*'], // \u76d1\u89c6\u7684\u6587\u4ef6\u8def\u5f84\n  server: {\n    baseDir: './src' // \u670d\u52a1\u5668\u6839\u76ee\u5f55\n  }\n};\n```\n\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8 Browsersync\uff1a\n\n``` bash\nbrowser-sync start --config bs-config.js\n```\n\u7136\u540e\u4e5f\u53ef\u4ee5\u5b9e\u73b0\u5728\u7f16\u8f91 HTML \u5185\u5bb9\u65f6\u5b9e\u73b0\u5b9e\u65f6\u66f4\u65b0\u548c\u9884\u89c8\u6548\u679c\u3002\u8d76\u5feb\u53bb\u8bd5\u8bd5\u5427\n\n#### Demo\u6e90\u7801\u5730\u5740\uff1a\n[https://github.com/ZHYI-source/Zspace.git](https://github.com/ZHYI-source/Zspace.git)\n",userId:"64aabf3d28f413f08d51cc00",category:"\u968f\u8bb0",viewNum:16,likeNum:0,isReship:!1,recommended:!0,likeToken:[],status:!0,createdAt:"2023-08-14T06:31:25.182Z",updatedAt:"2023-09-05T02:52:35.283Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64d9a1b5a0d58a3cda8cbe9a",title:"markdown\u8bed\u6cd5 demo",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",abstract:"markdown demo",content:'\n__Advertisement :)__\n\n- __[pica](https://nodeca.github.io/pica/demo/)__ - high quality and fast image\n  resize in browser.\n- __[babelfish](https://github.com/nodeca/babelfish/)__ - developer friendly\n  i18n with plurals support and easy syntax.\n\nYou will like those projects!\n\n---\n\n# h1 Heading 8-)\n## h2 Heading\n### h3 Heading\n#### h4 Heading\n##### h5 Heading\n###### h6 Heading\n\n\n## Horizontal Rules\n\n___\n\n---\n\n***\n\n\n## Typographic replacements\n\nEnable typographer option to see result.\n\n(c) (C) (r) (R) (tm) (TM) (p) (P) +-\n\ntest.. test... test..... test?..... test!....\n\n!!!!!! ???? ,,  -- ---\n\n"Smartypants, double quotes" and \'single quotes\'\n\n## \u56fe\u8868\n\n```js\n\tpie\n        title \u4eca\u5929\u665a\u4e0a\u5403\u4ec0\u4e48\uff1f\n        "\u706b\u9505" : 8\n        "\u5916\u5356" : 60\n        "\u81ea\u5df1\u716e" : 8\n        "\u6d77\u5e95\u635e" : 9\n        "\u6d77\u9c9c" : 5\n        "\u70e7\u70e4" : 5\n        "\u4e0d\u5403" : 5\n```\n\n```mermaid\n\tpie\n        title \u4eca\u5929\u665a\u4e0a\u5403\u4ec0\u4e48\uff1f\n        "\u706b\u9505" : 8\n        "\u5916\u5356" : 60\n        "\u81ea\u5df1\u716e" : 8\n        "\u6d77\u5e95\u635e" : 9\n        "\u6d77\u9c9c" : 5\n        "\u70e7\u70e4" : 5\n        "\u4e0d\u5403" : 5\n```\n\n```js\n\tmermaid\ngraph LR\nA[\u77e9\u5f62] -.->B(\u5706\u89d2\u77e9\u5f62) --\x3e C{\u83f1\u5f62} ==> D((\u5706\u5f62)) \nE([\u4f53\u80b2\u573a\u5f62])--\u5b9e\u7ebf\u6587\u672c--\x3e F[[\u5b50\u7a0b\u5e8f\u5f62]]==\u7c97\u5b9e\u7ebf\u6587\u672c==>G[(\u5706\u67f1\u5f62)]-.\u865a\u7ebf\u6587\u672c.->H{{\u516d\u89d2\u5f62}}\nI[/\u5e73\u884c\u56db\u8fb9\u5f62/]-.-J[\\\u53cd\u5411\u5e73\u884c\u56db\u8fb9\u5f62\\]---K[/\u68af\u5f62\\]===L[\\\u53cd\u5411\u68af\u5f62/]\n```\n     \n\n```mermaid\ngraph LR\nA[\u77e9\u5f62] -.->B(\u5706\u89d2\u77e9\u5f62) --\x3e C{\u83f1\u5f62} ==> D((\u5706\u5f62)) \nE([\u4f53\u80b2\u573a\u5f62])--\u5b9e\u7ebf\u6587\u672c--\x3e F[[\u5b50\u7a0b\u5e8f\u5f62]]==\u7c97\u5b9e\u7ebf\u6587\u672c==>G[(\u5706\u67f1\u5f62)]-.\u865a\u7ebf\u6587\u672c.->H{{\u516d\u89d2\u5f62}}\nI[/\u5e73\u884c\u56db\u8fb9\u5f62/]-.-J[\\\u53cd\u5411\u5e73\u884c\u56db\u8fb9\u5f62\\]---K[/\u68af\u5f62\\]===L[\\\u53cd\u5411\u68af\u5f62/]\n```\n\n```js\ngraph RL\n        User((\u7528\u6237))--1.\u7528\u6237\u767b\u5f55--\x3eLogin(\u767b\u5f55)\n        Login --2.\u67e5\u8be2--\x3eSERVER[\u670d\u52a1\u5668]\n subgraph \u67e5\u8be2\u6570\u636e\u5e93\n        SERVER--3.\u67e5\u8be2\u6570\u636e--\x3eDB[(\u6570\u636e\u5e93)]\n        DB--4.\u8fd4\u56de\u7ed3\u679c--\x3eSERVER\n end\n        SERVER--5.\u6821\u9a8c\u6570\u636e--\x3eCondition{\u5224\u65ad}\n        Condition --\x3e|\u6821\u9a8c\u6210\u529f| OK[\u767b\u5f55\u6210\u529f]\n        Condition --\x3e|\u6821\u9a8c\u5931\u8d25| ERR[\u767b\u5f55\u5931\u8d25]\n        OK--\x3eSYS[\u8fdb\u5165\u7cfb\u7edf]\n\n        ERR --\x3e|\u8fd4\u56de\u767b\u5f55\u9875\u9762,\u91cd\u65b0\u767b\u5f55| Login\n```\n\n```mermaid\ngraph RL\n        User((\u7528\u6237))--1.\u7528\u6237\u767b\u5f55--\x3eLogin(\u767b\u5f55)\n        Login --2.\u67e5\u8be2--\x3eSERVER[\u670d\u52a1\u5668]\n subgraph \u67e5\u8be2\u6570\u636e\u5e93\n        SERVER--3.\u67e5\u8be2\u6570\u636e--\x3eDB[(\u6570\u636e\u5e93)]\n        DB--4.\u8fd4\u56de\u7ed3\u679c--\x3eSERVER\n end\n        SERVER--5.\u6821\u9a8c\u6570\u636e--\x3eCondition{\u5224\u65ad}\n        Condition --\x3e|\u6821\u9a8c\u6210\u529f| OK[\u767b\u5f55\u6210\u529f]\n        Condition --\x3e|\u6821\u9a8c\u5931\u8d25| ERR[\u767b\u5f55\u5931\u8d25]\n        OK--\x3eSYS[\u8fdb\u5165\u7cfb\u7edf]\n\n        ERR --\x3e|\u8fd4\u56de\u767b\u5f55\u9875\u9762,\u91cd\u65b0\u767b\u5f55| Login\n```\n\n\n\n## Emphasis\n\n**This is bold text**\n\n__This is bold text__\n\n*This is italic text*\n\n_This is italic text_\n\n~~Strikethrough~~\n\n\n## Blockquotes\n\n\n> Blockquotes can also be nested...\n>> ...by using additional greater-than signs right next to each other...\n> > > ...or with spaces between arrows.\n\n\n## Lists\n\nUnordered\n\n+ Create a list by starting a line with `+`, `-`, or `*`\n+ Sub-lists are made by indenting 2 spaces:\n  - Marker character change forces new list start:\n    * Ac tristique libero volutpat at\n    + Facilisis in pretium nisl aliquet\n    - Nulla volutpat aliquam velit\n+ Very easy!\n\nOrdered\n\n1. Lorem ipsum dolor sit amet\n2. Consectetur adipiscing elit\n3. Integer molestie lorem at massa\n\n\n1. You can use sequential numbers...\n1. ...or keep all the numbers as `1.`\n\nStart numbering with offset:\n\n57. foo\n1. bar\n\n\n## Code\n\nInline `code`\n\nIndented code\n\n    // Some comments\n    line 1 of code\n    line 2 of code\n    line 3 of code\n\n\nBlock code "fences"\n\n```\nSample text here...\n```\n\nSyntax highlighting\n\n``` js\nvar foo = function (bar) {\n  return bar++;\n};\n\nconsole.log(foo(5));\n```\n\n## Tables\n\n| Option | Description |\n| ------ | ----------- |\n| data   | path to data files to supply the data that will be passed into templates. |\n| engine | engine to be used for processing templates. Handlebars is the default. |\n| ext    | extension to be used for dest files. |\n\nRight aligned columns\n\n| Option | Description |\n| ------:| -----------:|\n| data   | path to data files to supply the data that will be passed into templates. |\n| engine | engine to be used for processing templates. Handlebars is the default. |\n| ext    | extension to be used for dest files. |\n\n\n## Links\n\n[link text](http://dev.nodeca.com)\n\n[link with title](http://nodeca.github.io/pica/demo/ "title text!")\n\nAutoconverted link https://github.com/nodeca/pica (enable linkify to see)\n\n\n## Images\n\n![Minion](https://octodex.github.com/images/minion.png)\n![Stormtroopocat](https://octodex.github.com/images/stormtroopocat.jpg "The Stormtroopocat")\n\nLike links, Images also have a footnote style syntax\n\n![Alt text][id]\n\nWith a reference later in the document defining the URL location:\n\n[id]: https://octodex.github.com/images/dojocat.jpg  "The Dojocat"\n\n\n## Plugins\n\nThe killer feature of `markdown-it` is very effective support of\n[syntax plugins](https://www.npmjs.org/browse/keyword/markdown-it-plugin).\n\n\n### [Emojies](https://github.com/markdown-it/markdown-it-emoji)\n\n> Classic markup: :wink: :crush: :cry: :tear: :laughing: :yum:\n>\n> Shortcuts (emoticons): :-) :-( 8-) ;)\n\nsee [how to change output](https://github.com/markdown-it/markdown-it-emoji#change-output) with twemoji.\n\n\n### [Subscript](https://github.com/markdown-it/markdown-it-sub) / [Superscript](https://github.com/markdown-it/markdown-it-sup)\n\n- 19^th^\n- H~2~O\n\n\n### [\\<ins>](https://github.com/markdown-it/markdown-it-ins)\n\n++Inserted text++\n\n\n### [\\<mark>](https://github.com/markdown-it/markdown-it-mark)\n\n==Marked text==\n\n\n### [Footnotes](https://github.com/markdown-it/markdown-it-footnote)\n\nFootnote 1 link[^first].\n\nFootnote 2 link[^second].\n\nInline footnote^[Text of inline footnote] definition.\n\nDuplicated footnote reference[^second].\n\n[^first]: Footnote **can have markup**\n\n    and multiple paragraphs.\n\n[^second]: Footnote text.\n\n\n### [Definition lists](https://github.com/markdown-it/markdown-it-deflist)\n\nTerm 1\n\n:   Definition 1\nwith lazy continuation.\n\nTerm 2 with *inline markup*\n\n:   Definition 2\n\n        { some code, part of Definition 2 }\n\n    Third paragraph of definition 2.\n\n_Compact style:_\n\nTerm 1\n  ~ Definition 1\n\nTerm 2\n  ~ Definition 2a\n  ~ Definition 2b\n\n\n### [Abbreviations](https://github.com/markdown-it/markdown-it-abbr)\n\nThis is HTML abbreviation example.\n\nIt converts "HTML", but keep intact partial entries like "xxxHTMLyyy" and so on.\n\n*[HTML]: Hyper Text Markup Language\n\n### [Custom containers](https://github.com/markdown-it/markdown-it-container)\n\n::: warning\n*here be dragons*\n:::\n',userId:"64aabf3d28f413f08d51cc00",category:"markdown",viewNum:6,likeNum:0,isReship:!1,recommended:!1,likeToken:[],status:!0,createdAt:"2023-08-14T03:38:29.173Z",updatedAt:"2023-08-30T10:12:32.109Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64d5b819a0d58a3cda8cb7af",title:"\u6280\u5de7\u603b\u7ed3-\u68c0\u6d4b\u6d4f\u89c8\u5668\u5bf9CSS\u5c5e\u6027\u7684\u652f\u6301",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",abstract:"\u68c0\u6d4b\u6d4f\u89c8\u5668\u5bf9CSS\u5c5e\u6027\u7684\u652f\u6301\u524d\u8a00\u7ecf\u5e38\u4f1a\u51fa\u73b0\u4f7f\u7528\u67d0\u4e9b CSS \u5c5e\u6027\u7684\u65f6\u5019\u9700\u8981\u5224\u65ad\u6d4f\u89c8\u5668\u7684\u652f\u6301\u60c5\u51b5\u7684\u573a\u666f\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u51e0\u79cd\u5e38\u89c1\u7684\u65b9\u5f0f@supports@supports \u662f CSS \u8bed\u6cd5\uff0c\u53ef\u4ee5\u6307\u5b9a\u4f9d\u8d56\u4e8e\u6d4f\u89c8\u5668\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u7279\u5b9a\u7684CSS\u529f\u80fd\u7684\u652f\u6301\u58f0\u660e\u3002\u8fd9\u88ab\u79f0\u4e3a\u7279\u6027\u67e5\u8be2\u3002\u58f0\u660e\u8bed\u6cd5@supports at-rul",content:'# \u68c0\u6d4b\u6d4f\u89c8\u5668\u5bf9CSS\u5c5e\u6027\u7684\u652f\u6301\n\n## \u524d\u8a00\n\n\u7ecf\u5e38\u4f1a\u51fa\u73b0\u4f7f\u7528\u67d0\u4e9b CSS \u5c5e\u6027\u7684\u65f6\u5019\u9700\u8981\u5224\u65ad\u6d4f\u89c8\u5668\u7684\u652f\u6301\u60c5\u51b5\u7684\u573a\u666f\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u51e0\u79cd\u5e38\u89c1\u7684\u65b9\u5f0f\n\n## @supports\n\n[`@supports`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/@supports) \u662f CSS \u8bed\u6cd5\uff0c\u53ef\u4ee5\u6307\u5b9a\u4f9d\u8d56\u4e8e\u6d4f\u89c8\u5668\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u7279\u5b9a\u7684CSS\u529f\u80fd\u7684\u652f\u6301\u58f0\u660e\u3002\u8fd9\u88ab\u79f0\u4e3a*\u7279\u6027\u67e5\u8be2*\u3002\n\n- **\u58f0\u660e\u8bed\u6cd5**\n\n  `@supports` at-rule \u7531\u4e00\u7ec4\u6837\u5f0f\u58f0\u660e\u548c\u4e00\u6761*\u652f\u6301\u6761\u4ef6*\u6784\u6210\u3002\u652f\u6301\u6761\u4ef6\u7531\u4e00\u6761\u6216\u591a\u6761\u4f7f\u7528 \u903b\u8f91\u4e0e\uff08`and`\uff09\u3001\u903b\u8f91\u6216\uff08`or`\uff09\u3001\u903b\u8f91\u975e\uff08`not`\uff09\u7ed3\u5408\u7684\u540d\u79f0-\u503c\u5bf9\uff08name-value pair\uff09\u7ec4\u6210\u3002\u53ef\u4ee5\u4f7f\u7528\u5706\u62ec\u53f7\u8c03\u6574\u64cd\u4f5c\u7b26\u7684\u4f18\u5148\u7ea7\u3002\n\n```css\n@supports (display: grid) {\n  div {\n    display: grid;\n  }\n}\n```\n\n```css\n@supports not (display: grid) {\n  div {\n    float: right;\n  }\n}\n```\n\n```css\n@supports (display: table-cell) and (display: list-item) {}\n@supports (transform-style: preserve) or (-moz-transform-style: preserve) {}\n```\n\n\u6ce8\u610f\u4e0b\u9762\u8fd9\u79cd**\u7528\u62ec\u53f7\u63a7\u5236\u4f18\u5148\u5c42\u7ea7\u7684\u5f62\u5f0f**\uff1a\n\n```css\n@supports (transform-style: preserve-3d) or ((-moz-transform-style: preserve-3d) or\n          ((-o-transform-style: preserve-3d) or (-webkit-transform-style: preserve-3d))) {}\n```\n\n- **\u51fd\u6570\u8bed\u6cd5**\n\n  `selector()`\n\n  \u6d4b\u8bd5\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301\u7ecf\u8fc7\u6d4b\u8bd5\u7684\u9009\u62e9\u5668\u8bed\u6cd5\u3002\u5982\u679c\u6d4f\u89c8\u5668\u652f\u6301[\u5b50\u7ec4\u5408\u5668](https://developer.mozilla.org/en-US/docs/Web/CSS/Child_combinator)\uff0c\u5219\u4ee5\u4e0b\u793a\u4f8b\u8fd4\u56detrue\uff1a\n\n  ```js\n  @supports selector(A > B) {}\n  ```\n\n- **\u517c\u5bb9\u6027**\n\n  <a href="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691728031511.png" target="_blank">\n<img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691728031511.png" alt="1691728031511.png" width="100%">\n</a>\n\n## Js \u4e2d CSS.supports \u51fd\u6570\n\n[`CSS.supports()`](https://developer.mozilla.org/zh-CN/docs/Web/API/CSS/supports) \u9759\u6001\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a Boolean \u503c\uff0c\u7528\u6765\u6821\u9a8c\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301\u4e00\u4e2a\u7ed9\u5b9a\u7684CSS\u7279\u6027\u3002\n\n- **\u8bed\u6cd5**\n\n  ```js\n  boolValue = CSS.supports(propertyName, value);\n  boolValue = CSS.supports(supportCondition);\n  ```\n\n\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u4f20\u503c\u5f62\u5f0f\u3002\u7b2c\u4e00\u79cd\u7528\u6765\u68c0\u9a8c\u6d4f\u89c8\u5668\u5bf9\u4e8e\u4e00\u5bf9\u201c\u5c5e\u6027-\u5c5e\u6027\u503c\u201d\u7684\u652f\u6301\uff1a\n\n- **propertyName**\n\n  \u5b57\u7b26\u4e32\u3002\u7528\u6765\u68c0\u6d4b\u7684CSS\u5c5e\u6027\u540d\u3002\n\n- **value**\n\n  \u5b57\u7b26\u4e32\u3002\u7528\u6765\u68c0\u6d4b\u7684CSS\u5c5e\u6027\u503c\u3002\n\n- **supportCondition**\n\n  \u5b57\u7b26\u4e32\u3002\u7528\u6765\u68c0\u6d4b\u7684CSS\u58f0\u660e\u3001\u8868\u8fbe\u5f0f\u6216\u8005\u8bed\u6cd5\u3002\n\n- **\u4f7f\u7528**\n\n  ```js\n  CSS.supports(\'display\', \'grid\');\n  CSS.supports(\'display:grid\');\n  ```\n\n- **\u517c\u5bb9\u6027**\n\n  \u548c `@support` \u4e00\u6837\n\n## JS \u518d\u5b9e\u73b0\n\n\u4e0a\u9762\u7684\u65b9\u6cd5\u6709\u4e2a\u95ee\u9898\uff0c`supports` \u8fd9\u4e2a\u73a9\u610f\uff0c\u672c\u8eab\u5728 Edge81 \u4ee5\u4e0b\u5c31\u4e0d\u652f\u6301\uff0c\u90a3\u4ed6\u5c31\u6ca1\u6cd5\u68c0\u6d4b\u5176\u4ed6\u5c5e\u6027\u4e86\u3002\n\n\u8fd9\u91cc\u518d\u5b9e\u73b0\u4e00\u4e2a\u66f4\u52a0\u901a\u7528\u7684\u65b9\u5f0f\uff0c\u6765\u6e90\u81ea [JS\u68c0\u6d4bCSS\u5c5e\u6027\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301\u7684\u591a\u79cd\u65b9\u6cd5 - \u5f20\u65ed\u946b\u7684\u535a\u5ba2](https://www.zhangxinxu.com/wordpress/2019/11/js-css-supports-detect/)\uff1a\n\n### \u539f\u7406\n\n\u5f53\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u67d0\u4e2aCSS\u5c5e\u6027\u7684\u65f6\u5019\uff0c\u5c31\u7b97\u4f60\u5f3a\u5236\u8bbe\u7f6e\uff0c\u83b7\u53d6\u7684\u8ba1\u7b97\u503c\u4e5f\u4e0d\u4f1a\u662f\u4f60\u8bbe\u7f6e\u7684\u5c5e\u6027\u503c\u3002\n\n### \u5199\u6cd5\n\n```js\ndocument.head.style.filter = \'blur(5px)\';\nresult = window.getComputedStyle(document.head).filter == \'blur(5px)\';\n```\n\n\u6211\u4eec\u770b\u4e0b\u4e0a\u9762\u4ee3\u7801\u5728\u5b9e\u9645\u6d4f\u89c8\u5668\u4e2d\u7684\u8868\u73b0\uff0c\u9996\u5148\u662f\u652f\u6301\u7684Chrome\u6d4f\u89c8\u5668\uff0c`result`\u7684\u503c\u662f`true`\uff1a\n<a href="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727769869.png" target="_blank">\n<img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727769869.png" alt="Chrome\u6d4f\u89c8\u5668\u4e0b\u622a\u56fe" width="100%">\n</a>\n\u7136\u540e\u662f\u4e0d\u652f\u6301\u7684IE11\u6d4f\u89c8\u5668\uff0c`result`\u7684\u503c\u662f`false`\uff1a\n<a href="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727804254.png" target="_blank">\n<img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727804254.png" alt="IE11\u4e0b\u7684\u622a\u56fe" width="100%">\n</a>\n\n\u6b64\u65b9\u6cd5\u539f\u7406\u5f88\u7b80\u5355\uff0c\u517c\u5bb9\u6027\u4e5f\u975e\u5e38\u597d\uff0c\u5b9e\u73b0\u7684\u5173\u952e\u70b9\u5c31\u662f\u4f7f\u7528[getComputedStyle\u8fd9\u4e2aIE9+\u652f\u6301\u7684DOM API\u65b9\u6cd5](https://www.zhangxinxu.com/wordpress/2012/05/getcomputedstyle-js-getpropertyvalue-currentstyle/)\uff0c\u4e0d\u80fd\u4f7f\u7528`dom.style.xxxx`\u76f4\u63a5\u83b7\u53d6\u3002\n\n\u5982\u679c\u662f\u60f3\u8981\u5b9e\u73b0\u7c7b\u4f3cor\u6216\u8005and\u903b\u8f91\uff0c\u4f8b\u5982\u5e26\u79c1\u6709\u524d\u7f00\u90a3\u79cd\uff0c\u53ef\u4ee5\u4e0b\u9762\u8fd9\u6837\u5904\u7406\uff0c\u6b63\u5219\u5339\u914d\u5173\u952e\u7684\u90e8\u5206\uff1a\n\n```js\ndocument.head.style.width= \'fit-content\';\ndocument.head.style.width= \'-moz-fit-content\';\nresult = /fit-content/.test(window.getComputedStyle(document.head).width);\n```\n\n\u4f8b\u5982Firefox\u6d4f\u89c8\u5668\u4e0b\u7684\u7ed3\u679c\uff1a\n\n<a href="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727838749.png" target="_blank">\n<img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727838749.png" alt="Firefox\u6d4f\u89c8\u5668\u4e0b\u622a\u56fe" width="100%">\n</a>\n\n### \u517c\u5bb9\u6027\n\nIE9+\n\n### \u6ce8\u610f\u70b9\n\n`getComputedStyle()`\u65b9\u6cd5\u8fd4\u56de\u7684\u662f**\u8ba1\u7b97\u503c**\uff0c\u5f88\u591a\u65f6\u5019\u548c\u8bbe\u7f6e\u7684\u5c5e\u6027\u503c\u5e76\u4e0d\u540c\u3002\n\n\u4f8b\u5982\u8bbe\u7f6e\u884c\u9ad8\u4e3a\u5c0f\u6570\uff0c\u5728IE\u6d4f\u89c8\u5668\u4e0b\u8fd4\u56de\u5c31\u662fpx\u8ba1\u7b97\u503c\u3002\n\n\u53c8\u6216\u8005\u8bbe\u7f6e`background`\u5c5e\u6027\u503c\uff0c\u7ed3\u679c\u8fd4\u56de\u7684\u662fbackground\u5144\u5f1f\u59d0\u59b9\u4e00\u5927\u5bb6\u5b50\u503c\uff1a\n\n```js\ndocument.head.style.background = \'paint(abc)\';\nresult = /paint/.test(window.getComputedStyle(document.head).background);\n// result\u503c\u662ftrue\nwindow.getComputedStyle(document.head).background\n// "rgba(0, 0, 0, 0) paint(abc) repeat scroll 0% 0% / auto padding-box border-box"\n```\n\n<a href="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727862027.png" target="_blank">\n<img src="http://www.zhouyi.run:3089/v1/common/files/preview/img/1691727862027.png" alt="1691727862027.png" width="100%">\n</a>\n\n\u9700\u8981\u4f7f\u7528\u6a21\u7cca\u5339\u914d\u624d\u884c\u3002',userId:"64aabf3d28f413f08d51cc00",category:"CSS",viewNum:17,likeNum:0,isReship:!1,recommended:!0,likeToken:[],status:!0,createdAt:"2023-08-11T04:24:57.736Z",updatedAt:"2023-08-16T03:00:52.515Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64d5b1bba0d58a3cda8cb781",title:"JavaScript \u4e2d\u6709\u8da3\u7684 9 \u4e2a\u5e38\u7528\u7f16\u7801\u5957\u8def",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",abstract:"\u8fd9\u7bc7\u6587\u7ae0\u662f\u9762\u5411\u65b0\u624b\u7684\uff0c\u4f46\u5982\u679c\u5e78\u8fd0\u7684\u8bdd\uff0c\u5e0c\u671b\u80fd\u7ed9\u5404\u4f4d\u5927\u4f6c\u4eec\u5e26\u6765\u4e00\u4e9b\u5c0f\u5c0f\u7684\u542f\u53d1\u30021\u3001set\u5bf9\u8c61\uff1a\u6570\u7ec4\u5feb\u901f\u53bb\u91cd\u5e38\u89c4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u60f3\u8981\u7b5b\u9009\u552f\u4e00\u503c\uff0c\u4e00\u822c\u4f1a\u60f3\u5230\u904d\u5386\u6570\u7ec4\u7136\u540e\u9010\u4e2a\u5bf9\u6bd4\uff0c\u6216\u8005\u4f7f\u7528\u6210\u719f\u7684\u5e93\u6bd4\u5982lodash\u4e4b\u7c7b\u7684\u3002\u4e0d\u8fc7\uff0cES6\u5e26\u6765\u4e86\u4e00\u4e2a\u65b0\u73a9\u610f\u513f\uff01\u5b83\u5f15\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u5bf9\u8c61\u7c7b\u578b\uff1aSet\uff01\u800c\u4e14\uff0c\u5982\u679c\u7ed3\u5408\u4e0a...\u5c55",content:"\u8fd9\u7bc7\u6587\u7ae0\u662f\u9762\u5411\u65b0\u624b\u7684\uff0c\u4f46\u5982\u679c\u5e78\u8fd0\u7684\u8bdd\uff0c\u5e0c\u671b\u80fd\u7ed9\u5404\u4f4d\u5927\u4f6c\u4eec\u5e26\u6765\u4e00\u4e9b\u5c0f\u5c0f\u7684\u542f\u53d1\u3002\n### 1\u3001set\u5bf9\u8c61\uff1a\u6570\u7ec4\u5feb\u901f\u53bb\u91cd\n\u5e38\u89c4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u60f3\u8981\u7b5b\u9009\u552f\u4e00\u503c\uff0c\u4e00\u822c\u4f1a\u60f3\u5230\u904d\u5386\u6570\u7ec4\u7136\u540e\u9010\u4e2a\u5bf9\u6bd4\uff0c\u6216\u8005\u4f7f\u7528\u6210\u719f\u7684\u5e93\u6bd4\u5982lodash\u4e4b\u7c7b\u7684\u3002\n\n\u4e0d\u8fc7\uff0cES6\u5e26\u6765\u4e86\u4e00\u4e2a\u65b0\u73a9\u610f\u513f\uff01\u5b83\u5f15\u5165\u4e86\u4e00\u4e2a\u5168\u65b0\u7684\u5bf9\u8c61\u7c7b\u578b\uff1aSet\uff01\u800c\u4e14\uff0c\u5982\u679c\u7ed3\u5408\u4e0a...\u5c55\u5f00\u8fd0\u7b97\u7b26\uff0c\u6211\u4eec\u53ef\u4ee5\u8d85\u7ea7\u5feb\u901f\u5730\u521b\u5efa\u4e00\u4e2a\u5df2\u7ecf\u53bb\u91cd\u7684\u5168\u65b0\u6570\u7ec4\uff01\n``` js\nconst arr = [10, 10, 10, 20, 20, 30, 40, 40, 50, 60, 60, 70];\nconst uniArr = [...new Set(array)];\nconsole.log(uniArr);\n// [10, 20, 30, 40, 50, 60, 70]\n```\n\u8fd9\u4e2a\u6280\u5de7\u53ea\u9002\u7528\u4e8e\u5305\u542b\u57fa\u672c\u7c7b\u578b\u7684\u6570\u7ec4\uff0c\u6bd4\u5982undefined\u3001null\u3001boolean\u3001string\u548cnumber\u3002\n\n\u4f46\u662f\u8981\u8bb0\u4f4f\u54e6\uff0c\u5982\u679c\u6570\u7ec4\u91cc\u9762\u8fd8\u6709\u5bf9\u8c61\u3001\u51fd\u6570\u6216\u5176\u4ed6\u6570\u7ec4\u7684\u8bdd\uff0c\u5c31\u4e0d\u80fd\u7528\u8fd9\u4e2a\u65b9\u6cd5\u4e86\uff01\n\n### 2\u3001include\u65b9\u6cd5\uff1a\u7b80\u5316\uff08 || \u6216\uff09\u6761\u4ef6\u5224\u65ad\n\u5f53\u6211\u4eec\u4f7f\u7528\u903b\u8f91\u8fd0\u7b97\u7b26||\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u65f6\uff0c\u5982\u679c\u6709\u5f88\u591a\u53ef\u9009\u503c\uff0c\u4ee3\u7801\u4f1a\u53d8\u5f97\u5197\u957f\u3002\n\n\u4e0d\u8fc7\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528includes\u65b9\u6cd5\u6765\u7b80\u5316\u5bf9\u6570\u7ec4\u7684\u904d\u5386\u64cd\u4f5c\uff0c\u65b9\u4fbf\u5730\u5224\u65ad\u6570\u7ec4\u662f\u5426\u5305\u542b\u67d0\u4e2a\u7279\u5b9a\u7684\u5143\u7d20\u3002\n\n\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u66f4\u7b80\u6d01\u5730\u5217\u51fa\u53ef\u9009\u503c\uff0c\u800c\u4e0d\u5fc5\u5199\u4e00\u957f\u4e32\u7684\u6761\u4ef6\u5224\u65ad\u8bed\u53e5\u3002includes\u65b9\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u8f7b\u677e\u5224\u65ad\u6570\u7ec4\u4e2d\u662f\u5426\u5b58\u5728\u6307\u5b9a\u7684\u5143\u7d20\u3002\n``` js\nconst myNum = '3';\nconst numArr = ['1', '2', '3'];\n\n// \u4f7f\u7528 || \nif (myNum === '1' || myNum === '2' || myNum === '3') {\n    //\u2026\u2026\n}\n\n// \u4f7f\u7528 include\nif (numArr.includes(myNum)) {\n    //\u2026\u2026\n} \n```\n### 3\u3001\u622a\u65ad\u6570\u7ec4\uff1a\u6539\u53d8length\u5c31\u53ef\u4ee5\n\u64cd\u4f5c\u6570\u7ec4\u65f6\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u4f18\u5148\u4f7f\u7528array\u5bf9\u8c61\u4e2d\u7684\u9ad8\u7ea7\u51fd\u6570\u3002\n\n\u4e0d\u8fc7\uff0c\u6211\u8fd9\u91cc\u8981\u4ecb\u7ecd\u4e00\u79cd\u66f4\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u6539\u53d8\u6570\u7ec4\u957f\u5ea6\uff0c\u6211\u559c\u6b22\u5b83\u7684\u539f\u56e0\u662f\u5b83\u975e\u5e38\u76f4\u89c2\u4e14\u6613\u8bfb\u3002\n\n\u53ea\u9700\u4f7f\u7528length\u5c5e\u6027\u5e76\u4f20\u9012\u4e00\u4e2a\u6570\u5b57\uff0c\u5c31\u53ef\u4ee5\u6539\u53d8\u6570\u7ec4\u7684\u957f\u5ea6\u3002\u8fd9\u6837\u505a\u975e\u5e38\u65b9\u4fbf\uff01\n``` js\nlet array = ['1', '2', '3', '4'];\narray.length = 2;\nconsole.log(array); // ['1', '2']\n```\n\u5f53\u7136 \uff0c\u5982\u679c\u4f60\u66f4\u6ce8\u91cd\u6027\u80fd\uff0c\u8fd8\u662f\u8bf7\u4f7f\u7528 array.slice()\u3002\n### 4\u3001\u6570\u5b57\u5206\u5272\u7b26\uff1a\u63d0\u9ad8\u6570\u5b57\u53ef\u8bfb\u6027\n\u82e5\u8981\u63d0\u9ad8\u6570\u5b57\u7684\u53ef\u8bfb\u6027\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e0b\u5212\u7ebf\u4f5c\u4e3a\u5206\u9694\u7b26\u6765\u66f4\u597d\u5730\u533a\u5206\u6570\u5b57\u7684\u5404\u4e2a\u90e8\u5206\u3002\u8fd9\u6837\u505a\u53ef\u4ee5\u8ba9\u6570\u5b57\u66f4\u6613\u8bfb\uff0c\u8ba9\u4eba\u4e00\u76ee\u4e86\u7136\u3002\n``` js\nconst num = 1_000_000_000;\nconsole.log(num); // 1000000000\n```\n### 5\u3001\u63a7\u5236\u53f0\u6253\u5370\uff1a\u7528\u5bf9\u8c61\u5305\u88f9\u66f4\u6e05\u6670\n\n\u5728\u4f7f\u7528console.log()\u65f6\uff0c\u4f60\u53ef\u4ee5\u5c06\u53c2\u6570\u62ec\u5728\u5927\u62ec\u53f7\u4e2d\uff0c\u8fd9\u6837\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u8f93\u51fa\u65f6\u540c\u65f6\u663e\u793a\u53d8\u91cf\u7684\u540d\u79f0\u548c\u503c\u3002\u8fd9\u79cd\u65b9\u5f0f\u975e\u5e38\u65b9\u4fbf\uff0c\u8ba9\u4f60\u66f4\u6e05\u6670\u5730\u4e86\u89e3\u6bcf\u4e2a\u53d8\u91cf\u7684\u5185\u5bb9\u3002\n\n``` js\n\nconst name = \"\u9053\u957f\u738bjj\";\nconsole.log({ name });\n\n// {\n//     \"name\": \"\u9053\u957f\u738bjj\"\n// }\n```\n### 6\u3001\u77ed\u8def\u8fd0\u7b97\uff1a\u7b80\u5316\u6761\u4ef6\u5224\u65ad\nif...else\u6761\u4ef6\u5224\u65ad\u662f\u4ee3\u7801\u8fc7\u7a0b\u4e2d\u6700\u5e38\u7528\u7684\uff0c\u51e0\u4e4e\u5728\u4efb\u4f55\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u4f1a\u5feb\u901f\u5730\u6572\u4e0b\u5b83\u6765\u63a7\u5236\u903b\u8f91\u6d41\u7a0b\u3002\n\n\u4e0d\u8fc7\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e5f\u5e0c\u671b\u4ee3\u7801\u66f4\u52a0\u7b80\u6d01\u3001\u5feb\u901f\uff0c\u4e0d\u5360\u90a3\u4e48\u591a\u7bc7\u5e45\u3002\u6211\u4eec\u60f3\u5c3d\u53ef\u80fd\u5730\u7b80\u6d01\u4e14\u5feb\u901f\uff0c\u4e8e\u662f\u5c31\u4f1a\u7528\u5230\u4e09\u5143\u8fd0\u7b97\u7b26\uff1a\n\n``` js\nconst num = 75;\nconst result1 = num > 100 ? '\u5927\u4e8e100' : '\u5c0f\u4e8e100';\n```\n\u4f46\u662f\u6211\u5728\u8fd9\u91cc\u5e76\u4e0d\u662f\u63a8\u8350\u4f7f\u7528\u201c\u4e09\u5143\u8fd0\u7b97\u201d\uff0c\u5176\u5b9e\u6709\u65f6\u5019\u4e09\u5143\u8fd0\u7b97\u7b26\u53ef\u80fd\u4f1a\u8ba9\u4ee3\u7801\u903b\u8f91\u53d8\u5f97\u6709\u70b9\u590d\u6742\u54e6\uff01\u6bd4\u5982\u8fd9\u6837\uff1a\n``` js\nconst result2 = num > 100 ? (num > 200 ? '\u5927\u4e8e200' : '\u4ecb\u4e8e100\u548c200\u4e4b\u95f4') : '\u5c0f\u4e8e100';\n```\n\u8fd9\u4e2a\u65f6\u5019\uff0c\u4f7f\u7528 && \u548c || \u8fd9\u7c7b\u903b\u8f91\u8fd0\u7b97\u7b26\u53cd\u800c\u80fd\u66f4\u7b80\u6d01\u7684\u8868\u8fbe\u7b97\u5f0f\u3002\n\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a\n``` js\n// \u5047\u8bbe\uff0c\u6211\u4eec\u6709\u4e09\u4e2a\u5df2\u7ecf\u6253\u8fc7\u5206\u7684\u76f8\u4eb2\u5bf9\u8c61\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u6765\u5f53\u5973\u670b\u53cb\uff0c\u4f7f\u7528 `&&` \u53ef\u4ee5\u5f88\u597d\u7684\u5e2e\u6211\u4eec\u505a\u51fa\u9009\u62e9\u3002\nconst one = 8;\nconst two = 9;\nconst three = 10;\n// \u8fd4\u56de10\nconsole.log(one && two && three); \n// \u8fd4\u56de0\nconsole.log(0 && null);\n```\n``` js\n// \u5f53\u7136\uff0c\u5982\u679c\u4f60\u8db3\u591f\u72ec\u7279~~\uff08\u53d8\u6001\uff09~~\uff0c\u5c31\u662f\u4e0d\u8981\u5973\u670b\u53cb\uff0c\u5982\u679c\u9009\u53ea\u9009\u6700\u5dee\u7684\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 `||` \u6765\u5e2e\u4f60\u505a\u5439\u9009\u62e9\u3002\nconst one = 8;\nconst two = 9;\nconst three = 10;\n// \u8fd4\u56de8\nconsole.log(one || two || three); \n// \u8fd4\u56denull\nconsole.log(0 || null);\n```\n\n\u54e6\uff0c\u8fd9\u4e2a\u60c5\u51b5\u5728\u5de5\u4f5c\u573a\u666f\u4e2d\u786e\u5b9e\u5f88\u5e38\u89c1\u3002\n\n\u5047\u8bbe\u6211\u4eec\u60f3\u8fd4\u56de\u53d8\u91cf\u7684 length \uff0c\u4f46\u6211\u4eec\u4e0d\u786e\u5b9a\u63a5\u53e3\u4f1a\u4e0d\u4f1a\u7ed9\u6211\u4eec\u9700\u8981\u7684\u7c7b\u578b\u3002\n\n\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528 if/else \u8bed\u53e5\u6765\u68c0\u67e5\u662f\u53ef\u63a5\u53d7\u7684\u7c7b\u578b\uff0c\u4f46\u5b83\u4f1a\u8ba9\u6211\u4eec\u7684\u4ee3\u7801\u975e\u5e38\u81c3\u80bf\u3002\n\n\u8fd9\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u77ed\u8def\u8fd0\u7b97\u6765\u7b80\u5316\u4ee3\u7801\uff0c\u800c\u4e14\u6709\u6781\u9ad8\u7684\u5065\u58ee\u6027\uff1a\n``` js\n// \u4f7f\u7528if\nlet temp = getArray();\n\nif (!temp) {\n    tempLength = 0;\n} else {\n    tempLength = temp.length\n}\n\n// \u4f7f\u7528 ||\n// \u5982\u679c\u53d8\u91cf tempArray \u4e3a\u771f\uff0c\u5219\u5c06\u8fd4\u56de\u8be5\u53d8\u91cf\u3002\u5426\u5219\uff0c\u5c06\u8fd4\u56de []\nconst temp = (tempArray || []).length;\n```\n### 7\u3001\u53ef\u9009\u94fe\uff1a\u66f4\u52a0\u5b89\u5168\u5730\u8bbf\u95ee\u5bf9\u8c61\u5c5e\u6027\n\u4f60\u6709\u6ca1\u6709\u9047\u5230\u8fc7\u8bbf\u95ee\u5d4c\u5957\u5bf9\u8c61\u5c5e\u6027\u7684\u56f0\u6270\uff1f\n\n\u5c31\u662f\u6709\u65f6\u5019\u4f60\u6839\u672c\u4e0d\u786e\u5b9a\u8fd9\u4e2a\u5bf9\u8c61\u6216\u8005\u5b83\u7684\u5b50\u5c5e\u6027\u5230\u5e95\u5b58\u4e0d\u5b58\u5728\uff0c\u7ed3\u679c\u5c31\u62a5\u9519\u4e86\uff01\u4ee5\u81f3\u4e8e\u7a0b\u5e8f\u5d29\u6e83\u65e0\u6cd5\u8fd0\u884c\n\n``` js\nconsole.log(abc.ss)\n// ceError: abc is not defined\n//     at <anonymous>:1:1\n// (\u533f\u540d) @ VM190795\n```\n\u4e3a\u4e86\u4e0d\u8ba9\u62a5\u9519\u963b\u6b62\u6211\u4eec\u7684\u7a0b\u5e8f\u8fd0\u884c\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u5c06\u5b83\u5305\u88c5\u5728\u4e00\u4e2aif\u2026\u2026else\u4ee3\u7801\u5757\u4e2d\uff1a\n``` js\n\nif (abc.ss) {\n  console.log(abc.ss);\n} else {\n  console.log('\u6ca1\u6709abc\u8fd9\u4e2a\u53d8\u91cf\u558f~');\n}\n\n// \u8fd8\u53ef\u4ee5\u7528\u77ed\u8def\u8fd0\u7b97\nconsole.log(abc && abc.ss)\n```\n\u4e0d\u8fc7\uff0cES6\u7684\u53ef\u9009\u94fe\u53ef\u4ee5\u8ba9\u6211\u4eec\u5f7b\u5e95\u629b\u5f03\u6389\u4e0a\u9762\u7684\u5199\u6cd5\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8fd9\u6837\u505a\uff1a\n``` js\nconsole.log(abc?.ss?.aa?.bb?.cc)\n```\n### 8\u3001\u5de7\u7528\u8fd0\u7b97\u7b26\uff1a\u5feb\u901f\u7c7b\u578b\u8f6c\u6362\n\n\u5728\u8fd9\u4e4b\u524d\u9700\u8981\u79d1\u666e\u4e00\u4e9b\u5c0f\u77e5\u8bc6\uff1a\n\n\u9664\u4e86\u5e38\u89c4\u7684true\u548cfalse\u4e4b\u5916\uff0c\u5176\u4ed6\u53d8\u91cf\u4e5f\u53ef\u4ee5\u88ab\u5f53\u6210true \u6216\u8005 false\u3002\n\n\u9664\u4e860\u3001\"\"(\u7a7a\u5b57\u7b26\u4e32)\u3001null\u3001undefined\u3001NaN\u3001false \u4e4b\u5916\u5462\uff0cJavaScript\u4e2d\u7684\u6240\u6709\u5176\u4ed6\u503c\u90fd\u662f\"\u771f\u7684\"\u54e6\uff01\n\n\u6240\u4ee5\u5462\uff0c\u57fa\u4e8e\u8fd9\u4e2a\u8ba4\u77e5\u3002\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8d1f\u8fd0\u7b97\u7b26 ! \uff0c\u5c06\u7c7b\u578b\u8f6c\u6362\u4e3a \"boolean\" \u3002\n\n``` js\nconst x = Boolean(expression);     // \u63a8\u8350\nconst x = !!(expression);          // \u63a8\u8350\nconst x = new Boolean(expression); // \u4e0d\u592a\u597d\n```\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fde\u63a5\u8fd0\u7b97\u7b26 + \u540e\u8ddf\u4e00\u7ec4\u7a7a\u5f15\u53f7 ''\uff0c\u5c06\u7c7b\u578b\u8f6c\u6362\u4e3a \"string\" \u3002\n``` js\nconst value = 12 + '';\nconsole.log(value); // '12'\n```\n\n\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u51cf\u6cd5\u8fd0\u7b97\u7b26 -\uff0c\u5c06\u7c7b\u578b\u8f6c\u6362\u4e3a \"number\" \u3002\n``` js\n\nlet myValue = '12';\nmyValue = myValue - 1;\nconsole.log(myValue); // 11\n\n// \u5f53\u7136\u4e5f\u53ef\u4ee5\u8f6c\u6362 Boolean \u53d8\u6210 Number \n// \u5de5\u4f5c\u4e2d\u4e0d\u63a8\u8350\u8fd9\u6837\u7528\uff01\uff01\uff01\uff01\nconsole.log(+true); // 1\nconsole.log(+false); // 0\n```\n### 9\u3001\u5feb\u901f\u8fd0\u7b97\uff1a\u66f4\u5feb\u66f4\u7b80\u6d01\u7684\u6570\u5b66\u8fd0\u7b97\u64cd\u4f5c\u7b26\n\u4ee5\u524d\u6211\u4eec\u5728\u4f7f\u7528JavaScript\u8fdb\u884c\u6570\u5b66\u8fd0\u7b97\u65f6\uff0c\u603b\u662f\u8981\u501f\u52a9Math\u5e93\u8fdb\u884c\u8fd0\u7b97\u3002\u5f88\u5947\u602a\u7684\u662f\uff0c\u4f46\u662f\u5f88\u591a\u6559\u7a0b\u5e76\u6ca1\u6709\u63d0\u9192\u6211\u4eec\uff0cES7\u5176\u5b9e\u5e26\u6765\u7684\u5168\u65b0\u8fd0\u7b97\u7b26\u3002\n\n\u5982\u679c\u60f3\u793a\u4e58\u65b9\u64cd\u4f5c\uff0c\u901a\u5e38\u6211\u4eec\u4f1a\u8c03\u7528Math.pow(5, 7)\u8fd9\u4e2a\u65b9\u6cd5\u3002\u4f46\u662f\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5e42\u8fd0\u7b97\u7b26**\u4e86\uff0c\u800c\u4e14\u6027\u80fd\u66f4\u5feb\u66f4\u597d\u3002\n\n``` js\nconsole.log(5 ** 7); // 78125\n```\n\u5982\u679c\u60f3\u5c06\u6d6e\u70b9\u6570\u8f6c\u6362\u4e3a\u6574\u6570\uff0c\u901a\u5e38\u6211\u4eec\u4f1a\u4f7f\u7528Math.floor()\u3001Math.ceil()\u6216Math.round()\u8fd9\u4e9b\u65b9\u6cd5\u3002\u4e0d\u8fc7\uff0c\u5176\u5b9e\u53ef\u4ee5\u4f7f\u7528 | \u5c06\u6d6e\u70b9\u6570\u76f4\u63a5\u622a\u65ad\u4e3a\u6574\u6570\u3002\u8fd9\u4e2a\u6280\u5de7\u53ef\u4ee5\u8ba9\u4f60\u7684\u4ee3\u7801\u66f4\u7b80\u6d01\u9ad8\u6548\u54e6\uff01\n``` js\n// \u6b63\u6570\uff0c\u5219\u5411\u4e0b\u820d\u5165\nconsole.log(34.9 | 0);  // Result: 34\n// \u8d1f\u6570\uff0c\u5219\u5411\u4e0a\u820d\u5165\nconsole.log(-12.9 | 0); // Result: -12\n```\n\u4ee5\u524d\u6211\u4eec\u53ea\u53d6\u5343\u5206\u4f4d\u9700\u8981\u8fdb\u884c\u7c7b\u578b\u8f6c\u6362\u540e\u624d\u80fd\u8fdb\u884c\u53d6\u6570\n``` js\n\nlet str = \"33545\"; \nNumber(str.substring(0, str.length - 3)); // 33\n```\n\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u66f4\u4f18\u96c5\u5730\u8fd9\u6837\u505a\uff1a\n``` js\nconsole.log(33545 / 1000 | 0)  // Result: 33\n```\n\u5e0c\u671b\u672c\u6587\u80fd\u591f\u5e2e\u52a9\u5230\u4f60\uff0c \u867d\u7136\u771f\u7684\u5f88\u57fa\u7840\u5f88\u57fa\u7840\u3002",userId:"64aabf3d28f413f08d51cc00",category:"\u968f\u8bb0",viewNum:10,likeNum:0,isReship:!0,isReshipUrl:"https://juejin.cn/post/7239895900297740344",isReshipName:"JavaScript \u4e2d\u6709\u8da3\u7684 9 \u4e2a\u5e38\u7528\u7f16\u7801\u5957\u8def",recommended:!0,likeToken:[],status:!0,createdAt:"2023-08-11T03:57:47.190Z",updatedAt:"2023-08-30T15:33:35.265Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]},{_id:"64d5ae75a0d58a3cda8cb75a",title:"\u5982\u4f55\u5b8c\u6210\u4e00\u4e2a\u5b8c\u5168\u4e0d\u4f9d\u8d56\u5ba2\u6237\u7aef\u65f6\u95f4\u7684\u5012\u8ba1\u65f6",cover:"https://images.pexels.com/photos/1534609/pexels-photo-1534609.jpeg?auto=compress&cs=tinysrgb&w=1600",abstract:"\u6700\u8fd1\u5728\u505a\u4e00\u4e2a\u8c03\u67e5\u95ee\u5377\u7cfb\u7edf\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u9700\u6c42\u5c31\u662f\u5012\u8ba1 40 \u5206\u949f\u4ee5\u540e\u81ea\u52a8\u63d0\u4ea4\u95ee\u5377\u3002\u7531\u4e8e UI \u5e93\u4f7f\u7528\u7684\u662f antd\uff0c\u4e00\u4e2a\u5b8c\u5168\u4e0d\u4f9d\u8d56\u5ba2\u6237\u7aef\u65f6\u95f4\u7684\u5012\u8ba1\u65f6\u7ec4\u4ef6",content:"> \u4f5c\u8005\uff1axinglee\n> https://juejin.cn/post/7229898205256417341\n\n### \u524d\u8a00\n\n\u6700\u8fd1\u5728\u505a\u4e00\u4e2a\u8c03\u67e5\u95ee\u5377\u7cfb\u7edf\uff0c\u5176\u4e2d\u6709\u4e00\u4e2a\u9700\u6c42\u5c31\u662f\u5012\u8ba1 40 \u5206\u949f\u4ee5\u540e\u81ea\u52a8\u63d0\u4ea4\u95ee\u5377\u3002\u7531\u4e8e UI \u5e93\u4f7f\u7528\u7684\u662f `antd`\uff0c\u6240\u4ee5\u6211\u7b2c\u4e00\u53cd\u5e94\u662f\u4f7f\u7528 `antd` \u7684 `CountDown` \u7ec4\u4ef6\u3002\u4e8e\u662f\u6211\u5c31\u6109\u5feb\u7684\u5199\u51fa\u4ee5\u4e0b\u4ee3\u7801\uff1a\n``` js\nimport { Statistic } from 'antd';\nconst { Countdown } = Statistic;\n\nconst TOTAL_TIME = 40;\nconst deadline = dayjs(startTime).add(TOTAL_TIME, 'minute').valueOf();\n\n\nfunction TitleAndCountDown() {\n  useEffect(() => {\n    if (currentTime >= deadline) {\n      onFinish();\n    }\n  }, []);\n\n  return (\n    <Countdown\n      value={deadline}\n      onFinish={onFinish}\n      format=\"mm:ss\"\n      prefix={<img src={clock} style={{ width: 25, height: 25 }} />}\n    />\n  );\n}\n```\n\u5176\u4e2d `startTime` \uff0c`currentTime` \u662f\u670d\u52a1\u7aef\u7ed9\u6211\u8fd4\u56de\u7684\u5f00\u59cb\u7b54\u9898\u65f6\u95f4\u4ee5\u53ca\u73b0\u5728\u7684\u65f6\u95f4\uff0c`onFinish` \u662f\u63d0\u4ea4\u95ee\u5377\u7684\u51fd\u6570\u3002\u6d4b\u8bd5\u4e00\u5207\u6b63\u5e38\uff0c\u5e76\u4e14\u770b\u8d77\u6765\u597d\u50cf\u6ca1\u6709\u4f9d\u8d56\u5ba2\u6237\u7aef\u65f6\u95f4\uff0c\u4e8e\u662f\u6211\u5c31\u6109\u5feb\u7684\u63d0\u4ea4\u4e86\u4ee3\u7801\u3002\n### antd \u7684\u95ee\u9898\n\u4e0a\u7ebf\u540e\uff0c\u6709\u5ba2\u6237\u53cd\u6620\u5012\u8ba1\u65f6\u4e0d\u6b63\u5e38\uff0c\u8fdb\u5165\u7cfb\u7edf\u540e\u76f4\u63a5\u663e\u793a 9000 \u591a\u79d2\uff0c\u5bfc\u81f4\u4e1a\u52a1\u76f4\u63a5\u8fdb\u884c\u4e0d\u4e0b\u53bb\u3002\u8fd9\u4e2a\u65f6\u5019\u6211\u5c31\u61f5\u4e86\uff0c\u6211\u7684\u4ee3\u7801\u4e2d\u5e76\u6ca1\u6709\u4f9d\u8d56\u4efb\u4f55\u5ba2\u6237\u7aef\u65f6\u95f4\uff0c\u95ee\u9898\u80af\u5b9a\u662f\u51fa\u73b0\u5728 `antd` \u7684 `CountDown` \u7ec4\u4ef6\u4e0a\u3002\u4e8e\u662f\u6211\u5c31\u53bb\u770b\u4e86\u4e00\u4e0b `antd` \u7684 `CountDown` \u7ec4\u4ef6\u7684\u6e90\u7801\uff0c\u679c\u4e0d\u5176\u7136\n``` js\n // 30\u5e27\n const REFRESH_INTERVAL= 1000 / 30;\n\n  const stopTimer = () => {\n    onFinish?.();\n    if (countdown.current) {\n      clearInterval(countdown.current);\n      countdown.current = null;\n    }\n  };\n\n  const syncTimer = () => {\n    const timestamp = getTime(value);\n    if (timestamp >= Date.now()) {\n      countdown.current = setInterval(() => {\n        forceUpdate();\n        onChange?.(timestamp - Date.now());\n        if (timestamp < Date.now()) {\n          stopTimer();\n        }\n      }, REFRESH_INTERVAL);\n    }\n  };\n\n  React.useEffect(() => {\n    syncTimer();\n    return () => {\n      if (countdown.current) {\n        clearInterval(countdown.current);\n        countdown.current = null;\n      }\n    };\n  }, [value]);\n```\n\u6838\u5fc3\u4ee3\u7801\u5c31\u662f\u8fd9\u6bb5\uff0c\u672c\u8d28 `CountDown` \u5e76\u4e0d\u662f\u4e00\u4e2a\u5012\u8ba1\u65f6\uff0c\u800c\u662f\u6839\u636e\u5ba2\u6237\u7aef\u65f6\u95f4\u7b97\u51fa\u6765\u7684\u4e00\u4e2a\u65f6\u95f4\u5dee\u503c\uff0c\u8fd9\u4e5f\u80fd\u89e3\u91ca\u4e3a\u5565\u8fd9\u4e2a\u5012\u8ba1\u65f6\u76f8\u5bf9\u6bd4\u8f83\u51c6\u786e\u3002\n\n\u4f46\u662f\u4f9d\u8d56\u4e86\u5ba2\u6237\u7aef\u65f6\u95f4\uff0c\u5c31\u610f\u5473\u5ba2\u6237\u7684\u672c\u5730\u65f6\u95f4\u4f1a\u5f71\u54cd\u8fd9\u4e2a\u5012\u8ba1\u65f6\u7684\u51c6\u786e\u6027\uff0c\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u4fee\u6539\u672c\u5730\u65f6\u95f4\u6765\u7ed5\u8fc7\u5012\u8ba1\u65f6\u3002\u4e00\u5f00\u59cb\u6211\u7684\u65b9\u6848\u662f\u52a0\u5165 `diff` \u503c\u4fee\u6b63\u5ba2\u6237\u7aef\u65f6\u95f4\uff0c\u6211\u4e5f\u7ed9 antd \u5b98\u65b9\u63d0\u4e86\u4e00\u4e2a PR ( https://github.com/ant-design/ant-design/pull/41918 )\uff0c\u4f46\u662f\u88ab\u62d2\u7edd\u4e86\u3002\u540e\u6765\u60f3\u4e86\u4e00\u4e0b `CountDown` \u7ec4\u4ef6\u53ef\u4ee5\u76f4\u63a5\u4f20\u5165 `diff` \u540e\u7684 `value`\uff0c\u786e\u5b9e\u6ca1\u6709\u5fc5\u8981\u65b0\u589e `props`\u3002\n\n\u8fd9\u4e2a\u65b9\u6848\u540e\u6765\u4e5f\u662f\u88ab\u5426\u4e86\uff0c\u56e0\u4e3a\u8fd8\u662f\u4f9d\u8d56\u4e86\u5ba2\u6237\u7aef\u65f6\u95f4\u3002\u5ba2\u6237\u7684\u673a\u623f\u6761\u4ef6\u6bd4\u8f83\u590d\u6742\uff0c\u53ef\u80fd\u4e00\u5f00\u59cb\u65f6\u95f4\u4e0d\u5bf9\uff0c\u4f46\u662f\u505a\u9898\u9014\u4e2d\u65f6\u95f4\u4f1a\u6821\u6b63\u56de\u6765\u3002\u56e0\u4e3a\u6211\u4eec\u8fd9\u4e2a\u8c03\u67e5\u7cfb\u7edf\u77ed\u65f6\u95f4\u6709\u51e0\u5341\u4e07\u4eba\u53c2\u52a0\u8c03\u67e5\uff0c\u4e3a\u4e86\u4e0d\u7ed9\u670d\u52a1\u5668\u8fc7\u591a\u7684\u538b\u529b\uff0c\u67e5\u8be2\u670d\u52a1\u5668\u65f6\u95f4\u63a5\u53e3\u7684\u9891\u7387\u662f 1 \u5206\u949f\u4e00\u6b21\uff0c\u6240\u4ee5\u4f1a\u6709\u5f88\u957f\u65f6\u95f4\u7684\u5012\u8ba1\u65f6\u5f02\u5e38\u3002\n\n### \u5b8c\u5168\u4e0d\u4f9d\u8d56\u5ba2\u6237\u7aef\u65f6\u95f4\u7684\u5012\u8ba1\u65f6\n\u5012\u8ba1\u65f6\u7684\u65b9\u6848\u5927\u81f4\u6709 4 \u79cd\uff0c `setTimeout`\uff0c`setInterval`\uff0c`requestAnimationFrame`\uff0c`Web Worker` \u3002`requestAnimationFrame` \u548c `Web Worker` \u56e0\u4e3a\u517c\u5bb9\u6027\u95ee\u9898\u6682\u65f6\u653e\u5f03\u3002\n\n`setInterval` \u5b9e\u73b0\u5012\u8ba1\u65f6\u662f\u6bd4\u8f83\u65b9\u4fbf\u7684\uff0c\u4f46\u662f `setInterval` \u6709\u4e24\u4e2a\u7f3a\u70b9\n\n\u4f7f\u7528 `setInterval` \u65f6\uff0c\u67d0\u4e9b\u95f4\u9694\u4f1a\u88ab\u8df3\u8fc7\uff1b\n\u53ef\u80fd\u591a\u4e2a\u5b9a\u65f6\u5668\u4f1a\u8fde\u7eed\u6267\u884c\uff1b\n\u6bcf\u4e2a `setTimeout` \u4ea7\u751f\u7684\u4efb\u52a1\u4f1a\u76f4\u63a5 `push` \u5230\u4efb\u52a1\u961f\u5217\u4e2d\uff1b\u800c `setInterval` \u5728\u6bcf\u6b21\u628a\u4efb\u52a1`push`\u5230\u4efb\u52a1\u961f\u5217\u524d\uff0c\u90fd\u8981\u8fdb\u884c\u4e00\u4e0b\u5224\u65ad(\u770b\u4e0a\u6b21\u7684\u4efb\u52a1\u662f\u5426\u4ecd\u5728\u961f\u5217\u4e2d)\u3002\n\n\u53ef\u4ee5\u770b\u5230\uff0c\u4e3b\u7ebf\u7a0b\u7684\u6e32\u67d3\u90fd\u4f1a\u5bf9 `setTimeout` \u548c `setInterval` \u7684\u6267\u884c\u65f6\u95f4\u4ea7\u751f\u5f71\u54cd\uff0c\u4f46\u662f `setTimeout` \u7684\u5f71\u54cd\u5c0f\u4e00\u70b9\u3002\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 `setTimeout` \u6765\u5b9e\u73b0\u5012\u8ba1\u65f6.\n``` js\nconst INTERVAL = 1000;\n\ninterface CountDownProps {\n  restTime: number;\n  format?: string;\n  onFinish: () => void;\n  key: number;\n}\nexport const CountDown = ({ restTime, format = 'mm:ss', onFinish }: CountDownProps) => {\n  const timer = useRef<NodeJS.Timer | null>(null);\n  const [remainingTime, setRemainingTime] = useState(restTime);\n\n  useEffect(() => {\n    if (remainingTime < 0 && timer.current) {\n      onFinish?.();\n      clearTimeout(timer.current);\n      timer.current = null;\n      return;\n    }\n    timer.current = setTimeout(() => {\n      setRemainingTime((time) => time - INTERVAL);\n    }, INTERVAL);\n    return () => {\n      if (timer.current) {\n        clearTimeout(timer.current);\n        timer.current = null;\n      }\n    };\n  }, [remainingTime]);\n\n  return <span>{dayjs(remainingTime > 0 ? remainingTime : 0).format(format)}</span>;\n};\n```\n\u4e3a\u4e86\u4fee\u6b63 `setTimeout` \u7684\u65f6\u95f4\u8bef\u5dee,\u6211\u4eec\u9700\u8981\u5728 `\u805a\u7126\u9875\u9762\u7684\u65f6\u5019` \u4ee5\u53ca `\u5b9a\u65f6\u4e00\u5206\u949f`\u8bf7\u6c42\u4e00\u6b21\u670d\u52a1\u5668\u65f6\u95f4\u6765\u4fee\u6b63\u8bef\u5dee\u3002\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 `swr` \u6765\u8f7b\u677e\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\u3002\n``` js\nconst REFRESH_INTERVAL = 60 * 1000;\n\nexport function useServerTime() {\n  const { data } = useSWR('/api/getCurrentTime', swrFetcher, {\n    // revalidateOnFocus \u9ed8\u8ba4\u662f\u5f00\u542f\u7684\uff0c\u4f46\u662f\u6211\u4eec\u9879\u76ee\u4e2d\u7ed9\u5173\u4e86\uff0c\u6240\u4ee5\u9700\u8981\u91cd\u65b0\u6fc0\u6d3b\n    revalidateOnFocus: true,\n    refreshInterval: REFRESH_INTERVAL,\n  });\n  return { currentTime: data?.currentTime };\n}\n```\n\u6700\u540e\u6211\u4eec\u628a `CountDown` \u7ec4\u4ef6\u548c `useServerTime` \u7ed3\u5408\u8d77\u6765\n``` js\nfunction TitleAndCountDown() {\n  const { currentTime } = useServerTime();\n\n  return (\n    <Countdown\n      restTime={deadline - currentTime}\n      onFinish={onFinish}\n      key={deadline - currentTime}\n    />\n  );\n}\n```\n\u8fd9\u6837\uff0c\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u5b8c\u5168\u4e0d\u4f9d\u8d56\u5ba2\u6237\u7aef\u65f6\u95f4\u7684\u5012\u8ba1\u65f6\u7ec4\u4ef6\u3002\n### \u603b\u7ed3\n- \u4e0a\u9762\u65b9\u6848\u4e2d\u7684 `setTimeout` \u5176\u5b9e\u6362\u6210 `requestAnimationFrame` \u8ba1\u65f6\u4f1a\u66f4\u52a0\u51c6\u786e\uff0c\u4e5f\u89e3\u51b3\u4e86 `requestAnimationFrame` \u5728 \u672a\u88ab\u6fc0\u6d3b\u7684\u9875\u9762\u4e2d \u4e2d\u4e0d\u4f1a\u6267\u884c\u7684\u95ee\u9898\u3002\n- `setInterval` \u548c `setTimeout` \u7684\u65f6\u95f4\u8bef\u5dee\u662f\u7531\u4e8e\u4e3b\u7ebf\u7a0b\u7684\u6e32\u67d3\u65f6\u95f4\u9020\u6210\u7684\uff0c\u6240\u4ee5\u5982\u679c\u6211\u4eec\u7684\u9875\u9762\u4e2d\u6709\u5f88\u591a\u7684\u52a8\u753b\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8bef\u5dee\u4f1a\u66f4\u5927\u3002\n- \u672a\u6fc0\u6d3b\u7684\u9875\u9762\uff0c`setTimeout` \u7684\u6700\u5c0f\u6267\u884c\u95f4\u9694\u662f `1000ms`",userId:"64aabf3d28f413f08d51cc00",category:"\u968f\u8bb0",viewNum:10,likeNum:0,isReship:!1,recommended:!0,likeToken:["111.121.46.147"],status:!0,createdAt:"2023-08-11T03:43:49.036Z",updatedAt:"2023-08-23T13:11:04.153Z",user:[{_id:"64aabf3d28f413f08d51cc00",avatar:"http://www.zhouyi.run:3089/v1/common/files/preview/img/1691548931529.png",username:"admin",nickname:"ZY\xb7Admin",password:"$2a$10$MPIYm/7XO6.vEFGy7N9IvujPFDsvBM8buX1LgNNz65ZnHuStI0qVK",roleId:"64a423816f4197cfc70375e3",status:!0,createdAt:"2023-07-09T14:07:57.766Z",updatedAt:"2023-08-30T07:02:46.204Z",type:"admin",email:"1840354092@qq.com",address:"\u8d35\u5dde\u7701\u8d35\u9633\u5e02 \u7535\u4fe1",userIp:"111.121.40.63",platform:"Chrome.v115",website:"http://www.zhouyi.run"}]}]),u=(0,r.Z)(c,2),m=u[0],l=(u[1],(0,i.TH)().state),d=l.id;(0,o.useEffect)((function(){a(function(){var n,e=(0,s.Z)(m);try{for(e.s();!(n=e.n()).done;){var t=n.value;if(t._id===d)return t}}catch(r){e.e(r)}finally{e.f()}}())}),[l.id]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("section",{className:"post-detail",children:[(0,h.jsxs)("section",{className:"post-detail-header",children:[(0,h.jsx)("h2",{children:t.title}),(0,h.jsxs)("p",{className:"tip",children:[(0,h.jsxs)("span",{children:["\u6d4f\u89c8\u6570\uff1a",t.viewNum," "]}),(0,h.jsxs)("span",{children:["\u6700\u540e\u66f4\u65b0\u65f6\u95f4\uff1a",S.I.formatRelativeTime(t.updatedAt)," "]})]})]}),(0,h.jsx)("section",{className:"post-detail-body",children:(0,h.jsx)(w,{content:t.content})}),t.isReship&&(0,h.jsxs)("div",{className:"reship",children:[(0,h.jsxs)("p",{children:["\u8f6c\u8f7d\uff1a- ",(0,h.jsx)("a",{href:"http://www.zhouyi.run/#/PostDetail/64dc5132a0d58a3cda8cc3c0",target:"_blank",children:"\u300a\u3010\u9879\u76ee\u603b\u7ed3\u3011\u5173\u4e8e\u8bbf\u5ba2\u8bb0\u5f55\u529f\u80fd\u6a21\u5757\u6280\u672f\u70b9\u300b"})]}),(0,h.jsx)("p",{children:"\u8457\u540d\uff1a\u5982\u4fb5\u72af\u60a8\u7684\u7248\u6743\uff0c\u8bf7 \u8054\u7cfb\u6211 \u56de\u590d\u539f\u6587\u7ae0\u7684\u5730\u5740\uff0c\u6211\u4f1a\u7ed9\u60a8\u5220\u9664\u6b64\u6587\u7ae0\uff0c\u7ed9\u60a8\u5e26\u6765\u4e0d\u4fbf\u8bf7\u60a8\u8c05\u89e3\uff01"})]}),(0,h.jsx)("footer",{children:(0,h.jsx)("hr",{})}),(0,h.jsx)(j,{})]})})}},26418:function(n,e,t){t.d(e,{I:function(){return o}});var s=t(15671),r=t(43144),o=function(){function n(){(0,s.Z)(this,n)}return(0,r.Z)(n,null,[{key:"formatTime",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd hh:mm:ss",t=new Date(n),s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[r]:("00"+s[r]).substr((""+s[r]).length)));return e}},{key:"formatRelativeTime",value:function(n){var e=new Date-new Date(n);if(e<6e4)return"\u521a\u521a";if(e<36e5){var t=Math.floor(e/6e4);return"".concat(t," \u5206\u949f\u524d")}if(e<864e5){var s=Math.floor(e/36e5);return"".concat(s," \u5c0f\u65f6\u524d")}return this.formatTime(n)}}]),n}()},60499:function(n,e,t){t.r(e),e.default={}}}]);
//# sourceMappingURL=416.acd2fe1f.chunk.js.map